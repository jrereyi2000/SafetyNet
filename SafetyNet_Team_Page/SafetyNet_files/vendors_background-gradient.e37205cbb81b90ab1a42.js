/*! For license information please see vendors~background-gradient.e37205cbb81b90ab1a42.js.LICENSE.txt */
(window.wpJsonpTemplateSections=window.wpJsonpTemplateSections||[]).push([[45],{1003:function(e,t,n){"use strict";var i=n(253),o=function(e,t,n){var i=t[0],o=t[1],r=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=t[8],p=Math.sin(n),f=Math.cos(n);return e[0]=f*i+p*a,e[1]=f*o+p*s,e[2]=f*r+p*c,e[3]=f*a-p*i,e[4]=f*s-p*o,e[5]=f*c-p*r,e[6]=u,e[7]=l,e[8]=d,e};var r=[];var a=function(e){Object(i.a)(e.matrix),r[0]=-e.pivot[0]+e.position[0],r[1]=-e.pivot[1]+e.position[1],Object(i.c)(e.matrix,e.matrix,r),o(e.matrix,e.matrix,e.rotation),Object(i.b)(e.matrix,e.matrix,e.scale),Object(i.c)(e.matrix,e.matrix,e.pivot),e.worldMatrixNeedsUpdate=!0},s=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e};var c=function(e,t,n){var i=t[0],o=t[1],r=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=t[8],p=n[0],f=n[1],v=n[2],h=n[3],m=n[4],g=n[5],y=n[6],x=n[7],b=n[8];return e[0]=p*i+f*a+v*u,e[1]=p*o+f*s+v*l,e[2]=p*r+f*c+v*d,e[3]=h*i+m*a+g*u,e[4]=h*o+m*s+g*l,e[5]=h*r+m*c+g*d,e[6]=y*i+x*a+b*u,e[7]=y*o+x*s+b*l,e[8]=y*r+x*c+b*d,e};t.a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.matrixAutoUpdate&&a(t),(t.worldMatrixNeedsUpdate||n)&&(null===t.parent?s(t.worldMatrix,t.matrix):(Object(i.a)(t.worldMatrix),c(t.worldMatrix,t.parent.worldMatrix,t.matrix)),t.worldMatrixNeedsUpdate=!1,n=!0),t.children.forEach((function(t){e(t,n)}))}},132:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},136:function(e,t,n){var i=n(184);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&i(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},137:function(e,t,n){var i=n(199).default,o=n(142);e.exports=function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.__esModule=!0,e.exports.default=e.exports},142:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},161:function(e,t,n){var i=n(220),o=n(221),r=n(54),a=n(222);e.exports=function(e,t){return i(e)||o(e,t)||r(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},172:function(e,t,n){"use strict";var i=n(113),o="activeTexture";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.get(o)!==t&&(e.gl.activeTexture(i.z+t),e.set(o,t))}},173:function(e,t,n){"use strict";var i=n(113);t.a=function(e,t,n){var o="texture-".concat(n);e.get(o)!==t&&(e.gl.bindTexture(i.A,t),e.set(o,t))}},174:function(e,t,n){"use strict";t.a=function(e,t){var n=t.wrapS,i=t.wrapT,o=t.minFilter,r=t.magFilter,a=t.flipY,s=t.premultiplyAlpha;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s)}},184:function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t,i)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},193:function(e,t,n){"use strict";var i=n(113);t.a=function(e,t){var n=e.gl;t.image&&n.texImage2D(i.A,0,t.format,t.format,t.type,t.image),t.generateMipmap&&n.generateMipmap(i.A)}},199:function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},200:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u}));var i=n(161),o=n.n(i),r=(n(0),function(e,t){var n=o()(t,3),i=n[0],r=n[1],a=n[2],s=Math.max(i,r,a),c=Math.min(i,r,a),u=0,l=0,d=(s+c)/2;if(s!==c){var p=s-c;switch(l=d>.5?p/(2-s-c):p/(s+c),s){case i:u=(r-a)/p+(r<a?6:0);break;case r:u=(a-i)/p+2;break;case a:u=(i-r)/p+4}u/=6}return e[0]=u,e[1]=l,e[2]=d,e}),a=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},s=function(e,t){var n=o()(t,3),i=n[0],r=n[1],s=n[2],c=0,u=0,l=0;if(0===r)c=s,u=s,l=s;else{var d=s<.5?s*(1+r):s+r-s*r,p=2*s-d;c=a(p,d,i+1/3),u=a(p,d,i),l=a(p,d,i-1/3)}return e[0]=c,e[1]=u,e[2]=l,e},c=function(e,t,n){return.2126*e+.7152*t+.0722*n},u=function(e){var t,n=[0,0,0,1];if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var i,o=t[1],r=t[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return n[0]=Math.min(255,parseInt(i[1],10))/255,n[1]=Math.min(255,parseInt(i[2],10))/255,n[2]=Math.min(255,parseInt(i[3],10))/255,n[3]=i[4]?parseFloat(i[4]):1,n;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return n[0]=Math.min(100,parseInt(i[1],10))/100,n[1]=Math.min(100,parseInt(i[2],10))/100,n[2]=Math.min(100,parseInt(i[3],10))/100,n[3]=i[4]?parseFloat(i[4]):1,n;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){var s=parseFloat(i[1])/360,c=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;if(0===c)n[0]=u,n[1]=u,n[2]=u;else{var l=u<=.5?u*(1+c):u+c-u*c,d=2*u-l;n[0]=a(d,l,s+1/3),n[1]=a(d,l,s),n[2]=a(d,l,s-1/3)}return n[3]=i[4]?parseFloat(i[4]):1,n}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var p=t[1],f=p.length;if(3===f||4===f)return n[0]=parseInt(p.charAt(0)+p.charAt(0),16)/255,n[1]=parseInt(p.charAt(1)+p.charAt(1),16)/255,n[2]=parseInt(p.charAt(2)+p.charAt(2),16)/255,n[3]=p.charAt(3)?parseInt(p.charAt(3)+p.charAt(3),16)/255:1,n;if(6===f)return n[0]=parseInt(p.charAt(0)+p.charAt(1),16)/255,n[1]=parseInt(p.charAt(2)+p.charAt(3),16)/255,n[2]=parseInt(p.charAt(4)+p.charAt(5),16)/255,n[3]=p.charAt(6)&&p.charAt(7)?parseInt(p.charAt(6)+p.charAt(7),16)/255:1,n}return n}},220:function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},221:function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}},e.exports.__esModule=!0,e.exports.default=e.exports},222:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},248:function(e,t,n){"use strict";var i=n(112),o=n(113);t.a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.image,r=void 0===n?null:n,a=t.minFilter,s=void 0===a?o.t:a,c=t.magFilter,u=void 0===c?o.t:c,l=t.wrapS,d=void 0===l?o.f:l,p=t.wrapT,f=void 0===p?o.f:p,v=t.format,h=void 0===v?o.w:v,m=t.type,g=void 0===m?o.C:m,y=t.flipY,x=void 0===y||y,b=t.premultiplyAlpha,S=void 0!==b&&b;Object(i.a)(this,e),this.image=r,this.minFilter=s,this.magFilter=u,this.wrapS=d,this.wrapT=f,this.format=h,this.type=g,this.flipY=x,this.premultiplyAlpha=S,this.generateMipmap=this.minFilter!==o.t&&this.minFilter!==o.u,this.needsUpdate=!1}},250:function(e,t,n){"use strict";var i=n(174),o=n(172),r=n(173),a=n(193);t.a=function(e,t,n){var s=e.gl,c=e.properties.get(t);return Object(o.a)(e.state,n),c.glTexture?(Object(r.a)(e.state,c.glTexture,n),!0===t.needsUpdate&&(Object(a.a)(e.state,t,c.glTexture),t.needsUpdate=!1)):(c.glTexture=s.createTexture(),Object(r.a)(e.state,c.glTexture,n),Object(i.a)(s,t),Object(a.a)(e.state,t,c.glTexture)),n}},253:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));var i=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e};var o=function(e,t,n){var i=t[0],o=t[1],r=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=t[8],p=n[0],f=n[1];return e[0]=i,e[1]=o,e[2]=r,e[3]=a,e[4]=s,e[5]=c,e[6]=p*i+f*a+u,e[7]=p*o+f*s+l,e[8]=p*r+f*c+d,e};var r=function(e,t,n){var i=n[0],o=n[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}},256:function(e,t,n){"use strict";var i=n(112),o=n(113);t.a=function e(t){Object(i.a)(this,e),this.array=t,this.count=this.array.length,this.name="index",this.usage=o.y,this.needsUpdate=!0,"Uint32Array"===t.constructor.name?this.type=o.D:"Uint16Array"===t.constructor.name?this.type=o.E:this.type=o.C}},303:function(e,t,n){"use strict";var i=n(304),o=n.n(i),r=n(306),a=n.n(r),s=n(307),c=n.n(s),u=n(308),l=n.n(u);t.a={sub:o.a,length:a.a,copy:c.a,rotate:l.a}},304:function(e,t,n){e.exports=n(305)},305:function(e,t){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},306:function(e,t){e.exports=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}},307:function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e}},308:function(e,t){e.exports=function(e,t,n){var i=Math.cos(n),o=Math.sin(n),r=t[0],a=t[1];return e[0]=r*i-a*o,e[1]=r*o+a*i,e}},309:function(e,t,n){"use strict";var i=n(256);t.a=function(e,t){e.index=new i.a(t)}},310:function(e,t,n){(function(t){var n;n=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,n){var i={};e.exports=i,function(){i._nextId=0,i._seed=0,i._nowStartTime=+new Date,i._warnedOnce={},i._decomp=null,i.extend=function(e,t){var n,o;"boolean"==typeof t?(n=2,o=t):(n=1,o=!0);for(var r=n;r<arguments.length;r++){var a=arguments[r];if(a)for(var s in a)o&&a[s]&&a[s].constructor===Object?e[s]&&e[s].constructor!==Object?e[s]=a[s]:(e[s]=e[s]||{},i.extend(e[s],o,a[s])):e[s]=a[s]}return e},i.clone=function(e,t){return i.extend({},t,e)},i.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},i.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),i=0;i<n.length;i++)t.push(e[n[i]]);return t}for(var o in e)t.push(e[o]);return t},i.get=function(e,t,n,i){t=t.split(".").slice(n,i);for(var o=0;o<t.length;o+=1)e=e[t[o]];return e},i.set=function(e,t,n,o,r){var a=t.split(".").slice(o,r);return i.get(e,t,0,-1)[a[a.length-1]]=n,n},i.shuffle=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(i.random()*(t+1)),o=e[t];e[t]=e[n],e[n]=o}return e},i.choose=function(e){return e[Math.floor(i.random()*e.length)]},i.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},i.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},i.isFunction=function(e){return"function"==typeof e},i.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},i.isString=function(e){return"[object String]"===toString.call(e)},i.clamp=function(e,t,n){return e<t?t:e>n?n:e},i.sign=function(e){return e<0?-1:1},i.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-i._nowStartTime},i.random=function(t,n){return n=void 0!==n?n:1,(t=void 0!==t?t:0)+e()*(n-t)};var e=function(){return i._seed=(9301*i._seed+49297)%233280,i._seed/233280};i.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warnOnce=function(){var e=Array.prototype.slice.call(arguments).join(" ");i._warnedOnce[e]||(i.warn(e),i._warnedOnce[e]=!0)},i.deprecated=function(e,t,n){e[t]=i.chain((function(){i.warnOnce("ðŸ”… deprecated ðŸ”…",n)}),e[t])},i.nextId=function(){return i._nextId++},i.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},i.map=function(e,t){if(e.map)return e.map(t);for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n},i.topologicalSort=function(e){var t=[],n=[],o=[];for(var r in e)n[r]||o[r]||i._topologicalSort(r,n,o,e,t);return t},i._topologicalSort=function(e,t,n,o,r){var a=o[e]||[];n[e]=!0;for(var s=0;s<a.length;s+=1){var c=a[s];n[c]||t[c]||i._topologicalSort(c,t,n,o,r)}n[e]=!1,t[e]=!0,r.push(e)},i.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var n=arguments[t];n._chained?e.push.apply(e,n._chained):e.push(n)}var i=function(){for(var t,n=new Array(arguments.length),i=0,o=arguments.length;i<o;i++)n[i]=arguments[i];for(i=0;i<e.length;i+=1){var r=e[i].apply(t,n);void 0!==r&&(t=r)}return t};return i._chained=e,i},i.chainPathBefore=function(e,t,n){return i.set(e,t,i.chain(n,i.get(e,t)))},i.chainPathAfter=function(e,t,n){return i.set(e,t,i.chain(i.get(e,t),n))},i.setDecomp=function(e){i._decomp=e},i.getDecomp=function(){var e=i._decomp;try{e||"undefined"==typeof window||(e=window.decomp),e||void 0===t||(e=t.decomp)}catch(t){e=null}return e}}()},function(e,t){var n={};e.exports=n,n.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&n.update(t,e),t},n.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<t.length;i++){var o=t[i];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},n.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},n.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},n.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},n.shift=function(e,t){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+i}},function(e,t){var n={};e.exports=n,n.create=function(e,t){return{x:e||0,y:t||0}},n.clone=function(e){return{x:e.x,y:e.y}},n.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},n.rotate=function(e,t,n){var i=Math.cos(t),o=Math.sin(t);n||(n={});var r=e.x*i-e.y*o;return n.y=e.x*o+e.y*i,n.x=r,n},n.rotateAbout=function(e,t,n,i){var o=Math.cos(t),r=Math.sin(t);i||(i={});var a=n.x+((e.x-n.x)*o-(e.y-n.y)*r);return i.y=n.y+((e.x-n.x)*r+(e.y-n.y)*o),i.x=a,i},n.normalise=function(e){var t=n.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.cross=function(e,t){return e.x*t.y-e.y*t.x},n.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},n.add=function(e,t,n){return n||(n={}),n.x=e.x+t.x,n.y=e.y+t.y,n},n.sub=function(e,t,n){return n||(n={}),n.x=e.x-t.x,n.y=e.y-t.y,n},n.mult=function(e,t){return{x:e.x*t,y:e.y*t}},n.div=function(e,t){return{x:e.x/t,y:e.y/t}},n.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},n.neg=function(e){return{x:-e.x,y:-e.y}},n.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(e,t,n){var i={};e.exports=i;var o=n(2),r=n(0);i.create=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i],r={x:o.x,y:o.y,index:i,body:t,isInternal:!1};n.push(r)}return n},i.fromPath=function(e,t){var n=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(e,t,i){n.push({x:parseFloat(t),y:parseFloat(i)})})),i.create(n,t)},i.centre=function(e){for(var t,n,r,a=i.area(e,!0),s={x:0,y:0},c=0;c<e.length;c++)r=(c+1)%e.length,t=o.cross(e[c],e[r]),n=o.mult(o.add(e[c],e[r]),t),s=o.add(s,n);return o.div(s,6*a)},i.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return o.div(t,e.length)},i.area=function(e,t){for(var n=0,i=e.length-1,o=0;o<e.length;o++)n+=(e[i].x-e[o].x)*(e[i].y+e[o].y),i=o;return t?n/2:Math.abs(n)/2},i.inertia=function(e,t){for(var n,i,r=0,a=0,s=e,c=0;c<s.length;c++)i=(c+1)%s.length,r+=(n=Math.abs(o.cross(s[i],s[c])))*(o.dot(s[i],s[i])+o.dot(s[i],s[c])+o.dot(s[c],s[c])),a+=n;return t/6*(r/a)},i.translate=function(e,t,n){var i;if(n)for(i=0;i<e.length;i++)e[i].x+=t.x*n,e[i].y+=t.y*n;else for(i=0;i<e.length;i++)e[i].x+=t.x,e[i].y+=t.y;return e},i.rotate=function(e,t,n){if(0!==t){for(var i=Math.cos(t),o=Math.sin(t),r=0;r<e.length;r++){var a=e[r],s=a.x-n.x,c=a.y-n.y;a.x=n.x+(s*i-c*o),a.y=n.y+(s*o+c*i)}return e}},i.contains=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=e[(n+1)%e.length];if((t.x-i.x)*(o.y-i.y)+(t.y-i.y)*(i.x-o.x)>0)return!1}return!0},i.scale=function(e,t,n,r){if(1===t&&1===n)return e;var a,s;r=r||i.centre(e);for(var c=0;c<e.length;c++)a=e[c],s=o.sub(a,r),e[c].x=r.x+s.x*t,e[c].y=r.y+s.y*n;return e},i.chamfer=function(e,t,n,i,a){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,i=i||2,a=a||14;for(var s=[],c=0;c<e.length;c++){var u=e[c-1>=0?c-1:e.length-1],l=e[c],d=e[(c+1)%e.length],p=t[c<t.length?c:t.length-1];if(0!==p){var f=o.normalise({x:l.y-u.y,y:u.x-l.x}),v=o.normalise({x:d.y-l.y,y:l.x-d.x}),h=Math.sqrt(2*Math.pow(p,2)),m=o.mult(r.clone(f),p),g=o.normalise(o.mult(o.add(f,v),.5)),y=o.sub(l,o.mult(g,h)),x=n;-1===n&&(x=1.75*Math.pow(p,.32)),(x=r.clamp(x,i,a))%2==1&&(x+=1);for(var b=Math.acos(o.dot(f,v))/x,S=0;S<x;S++)s.push(o.add(o.rotate(m,b*S),y))}else s.push(l)}return s},i.clockwiseSort=function(e){var t=i.mean(e);return e.sort((function(e,n){return o.angle(t,e)-o.angle(t,n)})),e},i.isConvex=function(e){var t,n,i,o,r=0,a=e.length;if(a<3)return null;for(t=0;t<a;t++)if(i=(t+2)%a,o=(e[n=(t+1)%a].x-e[t].x)*(e[i].y-e[n].y),(o-=(e[n].y-e[t].y)*(e[i].x-e[n].x))<0?r|=1:o>0&&(r|=2),3===r)return!1;return 0!==r||null},i.hull=function(e){var t,n,i=[],r=[];for((e=e.slice(0)).sort((function(e,t){var n=e.x-t.x;return 0!==n?n:e.y-t.y})),n=0;n<e.length;n+=1){for(t=e[n];r.length>=2&&o.cross3(r[r.length-2],r[r.length-1],t)<=0;)r.pop();r.push(t)}for(n=e.length-1;n>=0;n-=1){for(t=e[n];i.length>=2&&o.cross3(i[i.length-2],i[i.length-1],t)<=0;)i.pop();i.push(t)}return i.pop(),r.pop(),i.concat(r)}},function(e,t,n){var i={};e.exports=i;var o=n(0);i.on=function(e,t,n){for(var i,o=t.split(" "),r=0;r<o.length;r++)i=o[r],e.events=e.events||{},e.events[i]=e.events[i]||[],e.events[i].push(n);return n},i.off=function(e,t,n){if(t){"function"==typeof t&&(n=t,t=o.keys(e.events).join(" "));for(var i=t.split(" "),r=0;r<i.length;r++){var a=e.events[i[r]],s=[];if(n&&a)for(var c=0;c<a.length;c++)a[c]!==n&&s.push(a[c]);e.events[i[r]]=s}}else e.events={}},i.trigger=function(e,t,n){var i,r,a,s,c=e.events;if(c&&o.keys(c).length>0){n||(n={}),i=t.split(" ");for(var u=0;u<i.length;u++)if(a=c[r=i[u]]){(s=o.clone(n,!1)).name=r,s.source=e;for(var l=0;l<a.length;l++)a[l].apply(e,[s])}}}},function(e,t,n){var i={};e.exports=i;var o=n(4),r=n(0),a=n(1),s=n(6);i.create=function(e){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},i.setModified=function(e,t,n,o){if(e.isModified=t,n&&e.parent&&i.setModified(e.parent,t,n,o),o)for(var r=0;r<e.composites.length;r++){var a=e.composites[r];i.setModified(a,t,n,o)}},i.add=function(e,t){var n=[].concat(t);o.trigger(e,"beforeAdd",{object:t});for(var a=0;a<n.length;a++){var s=n[a];switch(s.type){case"body":if(s.parent!==s){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(e,s);break;case"constraint":i.addConstraint(e,s);break;case"composite":i.addComposite(e,s);break;case"mouseConstraint":i.addConstraint(e,s.constraint)}}return o.trigger(e,"afterAdd",{object:t}),e},i.remove=function(e,t,n){var r=[].concat(t);o.trigger(e,"beforeRemove",{object:t});for(var a=0;a<r.length;a++){var s=r[a];switch(s.type){case"body":i.removeBody(e,s,n);break;case"constraint":i.removeConstraint(e,s,n);break;case"composite":i.removeComposite(e,s,n);break;case"mouseConstraint":i.removeConstraint(e,s.constraint)}}return o.trigger(e,"afterRemove",{object:t}),e},i.addComposite=function(e,t){return e.composites.push(t),t.parent=e,i.setModified(e,!0,!0,!1),e},i.removeComposite=function(e,t,n){var o=r.indexOf(e.composites,t);if(-1!==o&&(i.removeCompositeAt(e,o),i.setModified(e,!0,!0,!1)),n)for(var a=0;a<e.composites.length;a++)i.removeComposite(e.composites[a],t,!0);return e},i.removeCompositeAt=function(e,t){return e.composites.splice(t,1),i.setModified(e,!0,!0,!1),e},i.addBody=function(e,t){return e.bodies.push(t),i.setModified(e,!0,!0,!1),e},i.removeBody=function(e,t,n){var o=r.indexOf(e.bodies,t);if(-1!==o&&(i.removeBodyAt(e,o),i.setModified(e,!0,!0,!1)),n)for(var a=0;a<e.composites.length;a++)i.removeBody(e.composites[a],t,!0);return e},i.removeBodyAt=function(e,t){return e.bodies.splice(t,1),i.setModified(e,!0,!0,!1),e},i.addConstraint=function(e,t){return e.constraints.push(t),i.setModified(e,!0,!0,!1),e},i.removeConstraint=function(e,t,n){var o=r.indexOf(e.constraints,t);if(-1!==o&&i.removeConstraintAt(e,o),n)for(var a=0;a<e.composites.length;a++)i.removeConstraint(e.composites[a],t,!0);return e},i.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),i.setModified(e,!0,!0,!1),e},i.clear=function(e,t,n){if(n)for(var o=0;o<e.composites.length;o++)i.clear(e.composites[o],t,!0);return t?e.bodies=e.bodies.filter((function(e){return e.isStatic})):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,i.setModified(e,!0,!0,!1),e},i.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(i.allBodies(e.composites[n]));return t},i.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(i.allConstraints(e.composites[n]));return t},i.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(i.allComposites(e.composites[n]));return t},i.get=function(e,t,n){var o,r;switch(n){case"body":o=i.allBodies(e);break;case"constraint":o=i.allConstraints(e);break;case"composite":o=i.allComposites(e).concat(e)}return o?0===(r=o.filter((function(e){return e.id.toString()===t.toString()}))).length?null:r[0]:null},i.move=function(e,t,n){return i.remove(e,t),i.add(n,t),e},i.rebase=function(e){for(var t=i.allBodies(e).concat(i.allConstraints(e)).concat(i.allComposites(e)),n=0;n<t.length;n++)t[n].id=r.nextId();return i.setModified(e,!0,!0,!1),e},i.translate=function(e,t,n){for(var o=n?i.allBodies(e):e.bodies,r=0;r<o.length;r++)s.translate(o[r],t);return i.setModified(e,!0,!0,!1),e},i.rotate=function(e,t,n,o){for(var r=Math.cos(t),a=Math.sin(t),c=o?i.allBodies(e):e.bodies,u=0;u<c.length;u++){var l=c[u],d=l.position.x-n.x,p=l.position.y-n.y;s.setPosition(l,{x:n.x+(d*r-p*a),y:n.y+(d*a+p*r)}),s.rotate(l,t)}return i.setModified(e,!0,!0,!1),e},i.scale=function(e,t,n,o,r){for(var a=r?i.allBodies(e):e.bodies,c=0;c<a.length;c++){var u=a[c],l=u.position.x-o.x,d=u.position.y-o.y;s.setPosition(u,{x:o.x+l*t,y:o.y+d*n}),s.scale(u,t,n)}return i.setModified(e,!0,!0,!1),e},i.bounds=function(e){for(var t=i.allBodies(e),n=[],o=0;o<t.length;o+=1){var r=t[o];n.push(r.bounds.min,r.bounds.max)}return a.create(n)}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(2),a=n(7),s=(n(16),n(0)),c=n(1),u=n(10);!function(){i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i.create=function(t){var n={id:s.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},i=s.extend(n,t);return e(i,t),i},i.nextGroup=function(e){return e?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var e=function(e,t){t=t||{},i.set(e,{bounds:e.bounds||c.create(e.vertices),positionPrev:e.positionPrev||r.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),o.rotate(e.vertices,e.angle,e.position),u.rotate(e.axes,e.angle),c.update(e.bounds,e.vertices,e.velocity),i.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#14151f":s.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),a=e.isStatic?"#555":"#ccc",l=e.isStatic&&null===e.render.fillStyle?1:0;e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||a,e.render.lineWidth=e.render.lineWidth||l,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};i.set=function(e,t,n){var o;for(o in"string"==typeof t&&(o=t,(t={})[o]=n),t)if(Object.prototype.hasOwnProperty.call(t,o))switch(n=t[o],o){case"isStatic":i.setStatic(e,n);break;case"isSleeping":a.set(e,n);break;case"mass":i.setMass(e,n);break;case"density":i.setDensity(e,n);break;case"inertia":i.setInertia(e,n);break;case"vertices":i.setVertices(e,n);break;case"position":i.setPosition(e,n);break;case"angle":i.setAngle(e,n);break;case"velocity":i.setVelocity(e,n);break;case"angularVelocity":i.setAngularVelocity(e,n);break;case"parts":i.setParts(e,n);break;case"centre":i.setCentre(e,n);break;default:e[o]=n}},i.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var i=e.parts[n];i.isStatic=t,t?(i._original={restitution:i.restitution,friction:i.friction,mass:i.mass,inertia:i.inertia,density:i.density,inverseMass:i.inverseMass,inverseInertia:i.inverseInertia},i.restitution=0,i.friction=1,i.mass=i.inertia=i.density=1/0,i.inverseMass=i.inverseInertia=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.angularVelocity=0,i.speed=0,i.angularSpeed=0,i.motion=0):i._original&&(i.restitution=i._original.restitution,i.friction=i._original.friction,i.mass=i._original.mass,i.inertia=i._original.inertia,i.density=i._original.density,i.inverseMass=i._original.inverseMass,i.inverseInertia=i._original.inverseInertia,i._original=null)}},i.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=n*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},i.setDensity=function(e,t){i.setMass(e,t*e.area),e.density=t},i.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},i.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=o.create(t,e),e.axes=u.fromVertices(e.vertices),e.area=o.area(e.vertices),i.setMass(e,e.density*e.area);var n=o.centre(e.vertices);o.translate(e.vertices,n,-1),i.setInertia(e,i._inertiaScale*o.inertia(e.vertices,e.mass)),o.translate(e.vertices,e.position),c.update(e.bounds,e.vertices,e.velocity)},i.setParts=function(e,t,n){var r;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,r=0;r<t.length;r++){var a=t[r];a!==e&&(a.parent=e,e.parts.push(a))}if(1!==e.parts.length){if(n=void 0===n||n){var s=[];for(r=0;r<t.length;r++)s=s.concat(t[r].vertices);o.clockwiseSort(s);var c=o.hull(s),u=o.centre(c);i.setVertices(e,c),o.translate(e.vertices,u)}var l=i._totalProperties(e);e.area=l.area,e.parent=e,e.position.x=l.centre.x,e.position.y=l.centre.y,e.positionPrev.x=l.centre.x,e.positionPrev.y=l.centre.y,i.setMass(e,l.mass),i.setInertia(e,l.inertia),i.setPosition(e,l.centre)}},i.setCentre=function(e,t,n){n?(e.positionPrev.x+=t.x,e.positionPrev.y+=t.y,e.position.x+=t.x,e.position.y+=t.y):(e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y),e.position.x=t.x,e.position.y=t.y)},i.setPosition=function(e,t){var n=r.sub(t,e.position);e.positionPrev.x+=n.x,e.positionPrev.y+=n.y;for(var i=0;i<e.parts.length;i++){var a=e.parts[i];a.position.x+=n.x,a.position.y+=n.y,o.translate(a.vertices,n),c.update(a.bounds,a.vertices,e.velocity)}},i.setAngle=function(e,t){var n=t-e.angle;e.anglePrev+=n;for(var i=0;i<e.parts.length;i++){var a=e.parts[i];a.angle+=n,o.rotate(a.vertices,n,e.position),u.rotate(a.axes,n),c.update(a.bounds,a.vertices,e.velocity),i>0&&r.rotateAbout(a.position,n,e.position,a.position)}},i.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=r.magnitude(e.velocity)},i.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},i.translate=function(e,t){i.setPosition(e,r.add(e.position,t))},i.rotate=function(e,t,n){if(n){var o=Math.cos(t),r=Math.sin(t),a=e.position.x-n.x,s=e.position.y-n.y;i.setPosition(e,{x:n.x+(a*o-s*r),y:n.y+(a*r+s*o)}),i.setAngle(e,e.angle+t)}else i.setAngle(e,e.angle+t)},i.scale=function(e,t,n,r){var a=0,s=0;r=r||e.position;for(var l=0;l<e.parts.length;l++){var d=e.parts[l];o.scale(d.vertices,t,n,r),d.axes=u.fromVertices(d.vertices),d.area=o.area(d.vertices),i.setMass(d,e.density*d.area),o.translate(d.vertices,{x:-d.position.x,y:-d.position.y}),i.setInertia(d,i._inertiaScale*o.inertia(d.vertices,d.mass)),o.translate(d.vertices,{x:d.position.x,y:d.position.y}),l>0&&(a+=d.area,s+=d.inertia),d.position.x=r.x+(d.position.x-r.x)*t,d.position.y=r.y+(d.position.y-r.y)*n,c.update(d.bounds,d.vertices,e.velocity)}e.parts.length>1&&(e.area=a,e.isStatic||(i.setMass(e,e.density*a),i.setInertia(e,s))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},i.update=function(e,t,n,i){var a=Math.pow(t*n*e.timeScale,2),s=1-e.frictionAir*n*e.timeScale,l=e.position.x-e.positionPrev.x,d=e.position.y-e.positionPrev.y;e.velocity.x=l*s*i+e.force.x/e.mass*a,e.velocity.y=d*s*i+e.force.y/e.mass*a,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*s*i+e.torque/e.inertia*a,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=r.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var p=0;p<e.parts.length;p++){var f=e.parts[p];o.translate(f.vertices,e.velocity),p>0&&(f.position.x+=e.velocity.x,f.position.y+=e.velocity.y),0!==e.angularVelocity&&(o.rotate(f.vertices,e.angularVelocity,e.position),u.rotate(f.axes,e.angularVelocity),p>0&&r.rotateAbout(f.position,e.angularVelocity,e.position,f.position)),c.update(f.bounds,f.vertices,e.velocity)}},i.applyForce=function(e,t,n){e.force.x+=n.x,e.force.y+=n.y;var i=t.x-e.position.x,o=t.y-e.position.y;e.torque+=i*n.y-o*n.x},i._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var i=e.parts[n],o=i.mass!==1/0?i.mass:1;t.mass+=o,t.area+=i.area,t.inertia+=i.inertia,t.centre=r.add(t.centre,r.mult(i.position,o))}return t.centre=r.div(t.centre,t.mass),t}}()},function(e,t,n){var i={};e.exports=i;var o=n(4);i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(e,t){for(var n=t*t*t,o=0;o<e.length;o++){var r=e[o],a=r.speed*r.speed+r.angularSpeed*r.angularSpeed;if(0===r.force.x&&0===r.force.y){var s=Math.min(r.motion,a),c=Math.max(r.motion,a);r.motion=i._minBias*s+(1-i._minBias)*c,r.sleepThreshold>0&&r.motion<i._motionSleepThreshold*n?(r.sleepCounter+=1,r.sleepCounter>=r.sleepThreshold&&i.set(r,!0)):r.sleepCounter>0&&(r.sleepCounter-=1)}else i.set(r,!1)}},i.afterCollisions=function(e,t){for(var n=t*t*t,o=0;o<e.length;o++){var r=e[o];if(r.isActive){var a=r.collision,s=a.bodyA.parent,c=a.bodyB.parent;if(!(s.isSleeping&&c.isSleeping||s.isStatic||c.isStatic)&&(s.isSleeping||c.isSleeping)){var u=s.isSleeping&&!s.isStatic?s:c,l=u===s?c:s;!u.isStatic&&l.motion>i._motionWakeThreshold*n&&i.set(u,!1)}}}},i.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||o.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&o.trigger(e,"sleepEnd"))}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(2),a=n(7),s=n(1),c=n(10),u=n(0);i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,i=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,o=r.magnitude(r.sub(n,i));t.length=void 0!==t.length?t.length:o,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var a={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(a.type="pin",a.anchors=!1):t.stiffness<.9&&(a.type="spring"),t.render=u.extend(a,t.render),t},i.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],i=n.constraintImpulse;n.isStatic||0===i.x&&0===i.y&&0===i.angle||(n.position.x+=i.x,n.position.y+=i.y,n.angle+=i.angle)}},i.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var o=e[n],r=!o.bodyA||o.bodyA&&o.bodyA.isStatic,a=!o.bodyB||o.bodyB&&o.bodyB.isStatic;(r||a)&&i.solve(e[n],t)}for(n=0;n<e.length;n+=1)r=!(o=e[n]).bodyA||o.bodyA&&o.bodyA.isStatic,a=!o.bodyB||o.bodyB&&o.bodyB.isStatic,r||a||i.solve(e[n],t)},i.solve=function(e,t){var n=e.bodyA,o=e.bodyB,a=e.pointA,s=e.pointB;if(n||o){n&&!n.isStatic&&(r.rotate(a,n.angle-e.angleA,a),e.angleA=n.angle),o&&!o.isStatic&&(r.rotate(s,o.angle-e.angleB,s),e.angleB=o.angle);var c=a,u=s;if(n&&(c=r.add(n.position,a)),o&&(u=r.add(o.position,s)),c&&u){var l=r.sub(c,u),d=r.magnitude(l);d<i._minLength&&(d=i._minLength);var p,f,v,h,m,g=(d-e.length)/d,y=e.stiffness<1?e.stiffness*t:e.stiffness,x=r.mult(l,g*y),b=(n?n.inverseMass:0)+(o?o.inverseMass:0),S=b+((n?n.inverseInertia:0)+(o?o.inverseInertia:0));if(e.damping){var w=r.create();v=r.div(l,d),m=r.sub(o&&r.sub(o.position,o.positionPrev)||w,n&&r.sub(n.position,n.positionPrev)||w),h=r.dot(v,m)}n&&!n.isStatic&&(f=n.inverseMass/b,n.constraintImpulse.x-=x.x*f,n.constraintImpulse.y-=x.y*f,n.position.x-=x.x*f,n.position.y-=x.y*f,e.damping&&(n.positionPrev.x-=e.damping*v.x*h*f,n.positionPrev.y-=e.damping*v.y*h*f),p=r.cross(a,x)/S*i._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=p,n.angle-=p),o&&!o.isStatic&&(f=o.inverseMass/b,o.constraintImpulse.x+=x.x*f,o.constraintImpulse.y+=x.y*f,o.position.x+=x.x*f,o.position.y+=x.y*f,e.damping&&(o.positionPrev.x+=e.damping*v.x*h*f,o.positionPrev.y+=e.damping*v.y*h*f),p=r.cross(s,x)/S*i._torqueDampen*o.inverseInertia*(1-e.angularStiffness),o.constraintImpulse.angle+=p,o.angle+=p)}}},i.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],u=n.constraintImpulse;if(!(n.isStatic||0===u.x&&0===u.y&&0===u.angle)){a.set(n,!1);for(var l=0;l<n.parts.length;l++){var d=n.parts[l];o.translate(d.vertices,u),l>0&&(d.position.x+=u.x,d.position.y+=u.y),0!==u.angle&&(o.rotate(d.vertices,u.angle,n.position),c.rotate(d.axes,u.angle),l>0&&r.rotateAbout(d.position,u.angle,n.position,d.position)),s.update(d.bounds,d.vertices,n.velocity)}u.angle*=i._warming,u.x*=i._warming,u.y*=i._warming}}},i.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+e.pointA.x,y:(e.bodyA?e.bodyA.position.y:0)+e.pointA.y}},i.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+e.pointB.x,y:(e.bodyB?e.bodyB.position.y:0)+e.pointB.y}}},function(e,t,n){var i={};e.exports=i;var o=n(17);i.create=function(e,t){var n=e.bodyA,o=e.bodyB,r=e.parentA,a=e.parentB,s={id:i.id(n,o),bodyA:n,bodyB:o,contacts:{},activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:n.isSensor||o.isSensor,timeCreated:t,timeUpdated:t,inverseMass:r.inverseMass+a.inverseMass,friction:Math.min(r.friction,a.friction),frictionStatic:Math.max(r.frictionStatic,a.frictionStatic),restitution:Math.max(r.restitution,a.restitution),slop:Math.max(r.slop,a.slop)};return i.update(s,e,t),s},i.update=function(e,t,n){var r=e.contacts,a=t.supports,s=e.activeContacts,c=t.parentA,u=t.parentB;if(e.collision=t,e.inverseMass=c.inverseMass+u.inverseMass,e.friction=Math.min(c.friction,u.friction),e.frictionStatic=Math.max(c.frictionStatic,u.frictionStatic),e.restitution=Math.max(c.restitution,u.restitution),e.slop=Math.max(c.slop,u.slop),s.length=0,t.collided){for(var l=0;l<a.length;l++){var d=a[l],p=o.id(d),f=r[p];f?s.push(f):s.push(r[p]=o.create(d))}e.separation=t.depth,i.setActive(e,!0,n)}else!0===e.isActive&&i.setActive(e,!1,n)},i.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},i.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},function(e,t,n){var i={};e.exports=i;var o=n(2),r=n(0);i.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var i=(n+1)%e.length,a=o.normalise({x:e[i].y-e[n].y,y:e[n].x-e[i].x}),s=0===a.y?1/0:a.x/a.y;t[s=s.toFixed(3).toString()]=a}return r.values(t)},i.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),i=Math.sin(t),o=0;o<e.length;o++){var r,a=e[o];r=a.x*n-a.y*i,a.y=a.x*i+a.y*n,a.x=r}}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(0),a=n(6),s=n(1),c=n(2);i.rectangle=function(e,t,n,i,s){s=s||{};var c={label:"Rectangle Body",position:{x:e,y:t},vertices:o.fromPath("L 0 0 L "+n+" 0 L "+n+" "+i+" L 0 "+i)};if(s.chamfer){var u=s.chamfer;c.vertices=o.chamfer(c.vertices,u.radius,u.quality,u.qualityMin,u.qualityMax),delete s.chamfer}return a.create(r.extend({},c,s))},i.trapezoid=function(e,t,n,i,s,c){c=c||{};var u,l=n*(s*=.5),d=l+(1-2*s)*n,p=d+l;u=s<.5?"L 0 0 L "+l+" "+-i+" L "+d+" "+-i+" L "+p+" 0":"L 0 0 L "+d+" "+-i+" L "+p+" 0";var f={label:"Trapezoid Body",position:{x:e,y:t},vertices:o.fromPath(u)};if(c.chamfer){var v=c.chamfer;f.vertices=o.chamfer(f.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete c.chamfer}return a.create(r.extend({},f,c))},i.circle=function(e,t,n,o,a){o=o||{};var s={label:"Circle Body",circleRadius:n};a=a||25;var c=Math.ceil(Math.max(10,Math.min(a,n)));return c%2==1&&(c+=1),i.polygon(e,t,c,n,r.extend({},s,o))},i.polygon=function(e,t,n,s,c){if(c=c||{},n<3)return i.circle(e,t,s,c);for(var u=2*Math.PI/n,l="",d=.5*u,p=0;p<n;p+=1){var f=d+p*u,v=Math.cos(f)*s,h=Math.sin(f)*s;l+="L "+v.toFixed(3)+" "+h.toFixed(3)+" "}var m={label:"Polygon Body",position:{x:e,y:t},vertices:o.fromPath(l)};if(c.chamfer){var g=c.chamfer;m.vertices=o.chamfer(m.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete c.chamfer}return a.create(r.extend({},m,c))},i.fromVertices=function(e,t,n,i,u,l,d,p){var f,v,h,m,g,y,x,b,S,w,P=r.getDecomp();for(f=Boolean(P&&P.quickDecomp),i=i||{},h=[],u=void 0!==u&&u,l=void 0!==l?l:.01,d=void 0!==d?d:10,p=void 0!==p?p:.01,r.isArray(n[0])||(n=[n]),S=0;S<n.length;S+=1)if(g=n[S],!(m=o.isConvex(g))&&!f&&r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),m||!f)g=m?o.clockwiseSort(g):o.hull(g),h.push({position:{x:e,y:t},vertices:g});else{var C=g.map((function(e){return[e.x,e.y]}));P.makeCCW(C),!1!==l&&P.removeCollinearPoints(C,l),!1!==p&&P.removeDuplicatePoints&&P.removeDuplicatePoints(C,p);var A=P.quickDecomp(C);for(y=0;y<A.length;y++){var M=A[y].map((function(e){return{x:e[0],y:e[1]}}));d>0&&o.area(M)<d||h.push({position:o.centre(M),vertices:M})}}for(y=0;y<h.length;y++)h[y]=a.create(r.extend(h[y],i));if(u)for(y=0;y<h.length;y++){var _=h[y];for(x=y+1;x<h.length;x++){var I=h[x];if(s.overlaps(_.bounds,I.bounds)){var T=_.vertices,k=I.vertices;for(b=0;b<_.vertices.length;b++)for(w=0;w<I.vertices.length;w++){var z=c.magnitudeSquared(c.sub(T[(b+1)%T.length],k[w])),R=c.magnitudeSquared(c.sub(T[b],k[(w+1)%k.length]));z<5&&R<5&&(T[b].isInternal=!0,k[w].isInternal=!0)}}}}return h.length>1?(v=a.create(r.extend({parts:h.slice(0)},i)),a.setPosition(v,{x:e,y:t}),v):h[0]}},function(e,t,n){var i={};e.exports=i;var o=n(0);i.create=function(e){var t={};return e||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=parseInt(t.element.getAttribute("data-pixel-ratio"),10)||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var n=i._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var n=i._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var n=i._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=n.x,t.absolute.y=n.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},i.setElement(t,t.element),t},i.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove),t.addEventListener("touchstart",e.mousedown),t.addEventListener("touchend",e.mouseup)},i.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},i.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},i.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},i._getRelativeMousePosition=function(e,t,n){var i,o,r=t.getBoundingClientRect(),a=document.documentElement||document.body.parentNode||document.body,s=void 0!==window.pageXOffset?window.pageXOffset:a.scrollLeft,c=void 0!==window.pageYOffset?window.pageYOffset:a.scrollTop,u=e.changedTouches;return u?(i=u[0].pageX-r.left-s,o=u[0].pageY-r.top-c):(i=e.pageX-r.left-s,o=e.pageY-r.top-c),{x:i/(t.clientWidth/(t.width||t.clientWidth)*n),y:o/(t.clientHeight/(t.height||t.clientHeight)*n)}}},function(e,t,n){var i={};e.exports=i;var o=n(14),r=n(9),a=n(1);i.collisions=function(e,t){for(var n=[],s=t.pairs.table,c=0;c<e.length;c++){var u=e[c][0],l=e[c][1];if((!u.isStatic&&!u.isSleeping||!l.isStatic&&!l.isSleeping)&&i.canCollide(u.collisionFilter,l.collisionFilter)&&a.overlaps(u.bounds,l.bounds))for(var d=u.parts.length>1?1:0;d<u.parts.length;d++)for(var p=u.parts[d],f=l.parts.length>1?1:0;f<l.parts.length;f++){var v=l.parts[f];if(p===u&&v===l||a.overlaps(p.bounds,v.bounds)){var h,m=s[r.id(p,v)];h=m&&m.isActive?m.collision:null;var g=o.collides(p,v,h);g.collided&&n.push(g)}}}return n},i.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(2);i.collides=function(e,t,n){var a,s,c,u,l=!1;if(n){var d=e.parent,p=t.parent,f=d.speed*d.speed+d.angularSpeed*d.angularSpeed+p.speed*p.speed+p.angularSpeed*p.angularSpeed;l=n&&n.collided&&f<.2,u=n}else u={collided:!1,bodyA:e,bodyB:t};if(n&&l){var v=u.axisBody,h=v===e?t:e,m=[v.axes[n.axisNumber]];if(c=i._overlapAxes(v.vertices,h.vertices,m),u.reused=!0,c.overlap<=0)return u.collided=!1,u}else{if((a=i._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return u.collided=!1,u;if((s=i._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return u.collided=!1,u;a.overlap<s.overlap?(c=a,u.axisBody=e):(c=s,u.axisBody=t),u.axisNumber=c.axisNumber}u.bodyA=e.id<t.id?e:t,u.bodyB=e.id<t.id?t:e,u.collided=!0,u.depth=c.overlap,u.parentA=u.bodyA.parent,u.parentB=u.bodyB.parent,e=u.bodyA,t=u.bodyB,r.dot(c.axis,r.sub(t.position,e.position))<0?u.normal={x:c.axis.x,y:c.axis.y}:u.normal={x:-c.axis.x,y:-c.axis.y},u.tangent=r.perp(u.normal),u.penetration=u.penetration||{},u.penetration.x=u.normal.x*u.depth,u.penetration.y=u.normal.y*u.depth;var g=i._findSupports(e,t,u.normal),y=[];if(o.contains(e.vertices,g[0])&&y.push(g[0]),o.contains(e.vertices,g[1])&&y.push(g[1]),y.length<2){var x=i._findSupports(t,e,r.neg(u.normal));o.contains(t.vertices,x[0])&&y.push(x[0]),y.length<2&&o.contains(t.vertices,x[1])&&y.push(x[1])}return y.length<1&&(y=[g[0]]),u.supports=y,u},i._overlapAxes=function(e,t,n){for(var o,a,s=r._temp[0],c=r._temp[1],u={overlap:Number.MAX_VALUE},l=0;l<n.length;l++){if(a=n[l],i._projectToAxis(s,e,a),i._projectToAxis(c,t,a),(o=Math.min(s.max-c.min,c.max-s.min))<=0)return u.overlap=o,u;o<u.overlap&&(u.overlap=o,u.axis=a,u.axisNumber=l)}return u},i._projectToAxis=function(e,t,n){for(var i=r.dot(t[0],n),o=i,a=1;a<t.length;a+=1){var s=r.dot(t[a],n);s>o?o=s:s<i&&(i=s)}e.min=i,e.max=o},i._findSupports=function(e,t,n){for(var i,o,a,s,c=Number.MAX_VALUE,u=r._temp[0],l=t.vertices,d=e.position,p=0;p<l.length;p++)o=l[p],u.x=o.x-d.x,u.y=o.y-d.y,(i=-r.dot(n,u))<c&&(c=i,a=o);return o=l[a.index-1>=0?a.index-1:l.length-1],u.x=o.x-d.x,u.y=o.y-d.y,c=-r.dot(n,u),s=o,o=l[(a.index+1)%l.length],u.x=o.x-d.x,u.y=o.y-d.y,(i=-r.dot(n,u))<c&&(s=o),[a,s]}},function(e,t,n){var i={};e.exports=i;var o=n(0);i._registry={},i.register=function(e){if(i.isPlugin(e)||o.warn("Plugin.register:",i.toString(e),"does not implement all required fields."),e.name in i._registry){var t=i._registry[e.name],n=i.versionParse(e.version).number,r=i.versionParse(t.version).number;n>r?(o.warn("Plugin.register:",i.toString(t),"was upgraded to",i.toString(e)),i._registry[e.name]=e):n<r?o.warn("Plugin.register:",i.toString(t),"can not be downgraded to",i.toString(e)):e!==t&&o.warn("Plugin.register:",i.toString(e),"is already registered to different plugin object")}else i._registry[e.name]=e;return e},i.resolve=function(e){return i._registry[i.dependencyParse(e).name]},i.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},i.isPlugin=function(e){return e&&e.name&&e.version&&e.install},i.isUsed=function(e,t){return e.used.indexOf(t)>-1},i.isFor=function(e,t){var n=e.for&&i.dependencyParse(e.for);return!e.for||t.name===n.name&&i.versionSatisfies(t.version,n.range)},i.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var n=i.dependencies(e),r=o.topologicalSort(n),a=[],s=0;s<r.length;s+=1)if(r[s]!==e.name){var c=i.resolve(r[s]);c?i.isUsed(e,c.name)||(i.isFor(c,e)||(o.warn("Plugin.use:",i.toString(c),"is for",c.for,"but installed on",i.toString(e)+"."),c._warned=!0),c.install?c.install(e):(o.warn("Plugin.use:",i.toString(c),"does not specify an install function."),c._warned=!0),c._warned?(a.push("ðŸ”¶ "+i.toString(c)),delete c._warned):a.push("âœ… "+i.toString(c)),e.used.push(c.name)):a.push("âŒ "+r[s])}a.length>0&&o.info(a.join("  "))}else o.warn("Plugin.use:",i.toString(e),"does not specify any dependencies to install.")},i.dependencies=function(e,t){var n=i.dependencyParse(e),r=n.name;if(!(r in(t=t||{}))){e=i.resolve(e)||e,t[r]=o.map(e.uses||[],(function(t){i.isPlugin(t)&&i.register(t);var r=i.dependencyParse(t),a=i.resolve(t);return a&&!i.versionSatisfies(a.version,r.range)?(o.warn("Plugin.dependencies:",i.toString(a),"does not satisfy",i.toString(r),"used by",i.toString(n)+"."),a._warned=!0,e._warned=!0):a||(o.warn("Plugin.dependencies:",i.toString(t),"used by",i.toString(n),"could not be resolved."),e._warned=!0),r.name}));for(var a=0;a<t[r].length;a+=1)i.dependencies(t[r][a],t);return t}},i.dependencyParse=function(e){return o.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||o.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},i.versionParse=function(e){var t=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-]+)?$/;t.test(e)||o.warn("Plugin.versionParse:",e,"is not a valid version or range.");var n=t.exec(e),i=Number(n[4]),r=Number(n[5]),a=Number(n[6]);return{isRange:Boolean(n[1]||n[2]),version:n[3],range:e,operator:n[1]||n[2]||"",major:i,minor:r,patch:a,parts:[i,r,a],prerelease:n[7],number:1e8*i+1e4*r+a}},i.versionSatisfies=function(e,t){t=t||"*";var n=i.versionParse(t),o=i.versionParse(e);if(n.isRange){if("*"===n.operator||"*"===e)return!0;if(">"===n.operator)return o.number>n.number;if(">="===n.operator)return o.number>=n.number;if("~"===n.operator)return o.major===n.major&&o.minor===n.minor&&o.patch>=n.patch;if("^"===n.operator)return n.major>0?o.major===n.major&&o.number>=n.number:n.minor>0?o.minor===n.minor&&o.patch>=n.patch:o.patch===n.patch}return e===t||"*"===e}},function(e,t,n){var i={};e.exports=i;var o=n(0),r=n(5),a=n(1),s=n(4),c=n(2),u=n(12);!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout((function(){e(o.now())}),1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i._goodFps=30,i._goodDelta=1e3/60,i.create=function(e){var t={controller:i,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},n=o.extend(t,e);return n.canvas&&(n.canvas.width=n.options.width||n.canvas.width,n.canvas.height=n.options.height||n.canvas.height),n.mouse=e.mouse,n.engine=e.engine,n.canvas=n.canvas||d(n.options.width,n.options.height),n.context=n.canvas.getContext("2d"),n.textures={},n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.canvas.width,y:n.canvas.height}},1!==n.options.pixelRatio&&i.setPixelRatio(n,n.options.pixelRatio),o.isElement(n.element)?n.element.appendChild(n.canvas):n.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),n},i.run=function(t){!function o(r){t.frameRequestId=e(o),n(t,r),i.world(t,r),(t.options.showStats||t.options.showDebug)&&i.stats(t,t.context,r),(t.options.showPerformance||t.options.showDebug)&&i.performance(t,t.context,r)}()},i.stop=function(e){t(e.frameRequestId)},i.setPixelRatio=function(e,t){var n=e.options,i=e.canvas;"auto"===t&&(t=p(i)),n.pixelRatio=t,i.setAttribute("data-pixel-ratio",t),i.width=n.width*t,i.height=n.height*t,i.style.width=n.width+"px",i.style.height=n.height+"px"},i.lookAt=function(e,t,n,i){i=void 0===i||i,t=o.isArray(t)?t:[t],n=n||{x:0,y:0};for(var r={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},a=0;a<t.length;a+=1){var s=t[a],c=s.bounds?s.bounds.min:s.min||s.position||s,l=s.bounds?s.bounds.max:s.max||s.position||s;c&&l&&(c.x<r.min.x&&(r.min.x=c.x),l.x>r.max.x&&(r.max.x=l.x),c.y<r.min.y&&(r.min.y=c.y),l.y>r.max.y&&(r.max.y=l.y))}var d=r.max.x-r.min.x+2*n.x,p=r.max.y-r.min.y+2*n.y,f=e.canvas.height,v=e.canvas.width/f,h=d/p,m=1,g=1;h>v?g=h/v:m=v/h,e.options.hasBounds=!0,e.bounds.min.x=r.min.x,e.bounds.max.x=r.min.x+d*m,e.bounds.min.y=r.min.y,e.bounds.max.y=r.min.y+p*g,i&&(e.bounds.min.x+=.5*d-d*m*.5,e.bounds.max.x+=.5*d-d*m*.5,e.bounds.min.y+=.5*p-p*g*.5,e.bounds.max.y+=.5*p-p*g*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(u.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),u.setOffset(e.mouse,e.bounds.min))},i.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,i=t/e.options.width,o=n/e.options.height;e.context.setTransform(e.options.pixelRatio/i,0,0,e.options.pixelRatio/o,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},i.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},i.world=function(e,t){var n,l=o.now(),d=e.engine,p=d.world,f=e.canvas,h=e.context,m=e.options,g=e.timing,y=r.allBodies(p),x=r.allConstraints(p),b=m.wireframes?m.wireframeBackground:m.background,S=[],w=[],P={timestamp:d.timing.timestamp};if(s.trigger(e,"beforeRender",P),e.currentBackground!==b&&v(e,b),h.globalCompositeOperation="source-in",h.fillStyle="transparent",h.fillRect(0,0,f.width,f.height),h.globalCompositeOperation="source-over",m.hasBounds){for(n=0;n<y.length;n++){var C=y[n];a.overlaps(C.bounds,e.bounds)&&S.push(C)}for(n=0;n<x.length;n++){var A=x[n],M=A.bodyA,_=A.bodyB,I=A.pointA,T=A.pointB;M&&(I=c.add(M.position,A.pointA)),_&&(T=c.add(_.position,A.pointB)),I&&T&&(a.contains(e.bounds,I)||a.contains(e.bounds,T))&&w.push(A)}i.startViewTransform(e),e.mouse&&(u.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.options.width,y:(e.bounds.max.y-e.bounds.min.y)/e.options.height}),u.setOffset(e.mouse,e.bounds.min))}else w=x,S=y,1!==e.options.pixelRatio&&e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0);!m.wireframes||d.enableSleeping&&m.showSleeping?i.bodies(e,S,h):(m.showConvexHulls&&i.bodyConvexHulls(e,S,h),i.bodyWireframes(e,S,h)),m.showBounds&&i.bodyBounds(e,S,h),(m.showAxes||m.showAngleIndicator)&&i.bodyAxes(e,S,h),m.showPositions&&i.bodyPositions(e,S,h),m.showVelocity&&i.bodyVelocity(e,S,h),m.showIds&&i.bodyIds(e,S,h),m.showSeparations&&i.separations(e,d.pairs.list,h),m.showCollisions&&i.collisions(e,d.pairs.list,h),m.showVertexNumbers&&i.vertexNumbers(e,S,h),m.showMousePosition&&i.mousePosition(e,e.mouse,h),i.constraints(w,h),m.showBroadphase&&i.grid(e,d.grid,h),m.hasBounds&&i.endViewTransform(e),s.trigger(e,"afterRender",P),g.lastElapsed=o.now()-l},i.stats=function(e,t,n){for(var i=e.engine,o=i.world,a=r.allBodies(o),s=0,c=0,u=0;u<a.length;u+=1)s+=a[u].parts.length;var l={Part:s,Body:a.length,Cons:r.allConstraints(o).length,Comp:r.allComposites(o).length,Pair:i.pairs.list.length};for(var d in t.fillStyle="#0e0f19",t.fillRect(c,0,302.5,44),t.font="12px Arial",t.textBaseline="top",t.textAlign="right",l){var p=l[d];t.fillStyle="#aaa",t.fillText(d,c+55,8),t.fillStyle="#eee",t.fillText(p,c+55,26),c+=55}},i.performance=function(e,t){var n=e.engine,o=e.timing,r=o.deltaHistory,a=o.elapsedHistory,s=o.timestampElapsedHistory,c=o.engineDeltaHistory,u=o.engineElapsedHistory,d=n.timing.lastDelta,p=l(r),f=l(a),v=l(c),h=l(u),m=l(s)/p||0,g=1e3/p||0;t.fillStyle="#0e0f19",t.fillRect(0,50,370,34),i.status(t,10,69,60,4,r.length,Math.round(g)+" fps",g/i._goodFps,(function(e){return r[e]/p-1})),i.status(t,82,69,60,4,c.length,d.toFixed(2)+" dt",i._goodDelta/d,(function(e){return c[e]/v-1})),i.status(t,154,69,60,4,u.length,h.toFixed(2)+" ut",1-h/i._goodFps,(function(e){return u[e]/h-1})),i.status(t,226,69,60,4,a.length,f.toFixed(2)+" rt",1-f/i._goodFps,(function(e){return a[e]/f-1})),i.status(t,298,69,60,4,s.length,m.toFixed(2)+" x",m*m*m,(function(e){return(s[e]/r[e]/m||0)-1}))},i.status=function(e,t,n,i,r,a,s,c,u){e.strokeStyle="#888",e.fillStyle="#444",e.lineWidth=1,e.fillRect(t,n+7,i,1),e.beginPath(),e.moveTo(t,n+7-r*o.clamp(.4*u(0),-2,2));for(var l=0;l<i;l+=1)e.lineTo(t+l,n+7-(l<a?r*o.clamp(.4*u(l),-2,2):0));e.stroke(),e.fillStyle="hsl("+o.clamp(25+95*c,0,120)+",100%,60%)",e.fillRect(t,n-7,4,4),e.font="12px Arial",e.textBaseline="middle",e.textAlign="right",e.fillStyle="#eee",e.fillText(s,t+i,n-5)},i.constraints=function(e,t){for(var n=t,i=0;i<e.length;i++){var r=e[i];if(r.render.visible&&r.pointA&&r.pointB){var a,s,u=r.bodyA,l=r.bodyB;if(a=u?c.add(u.position,r.pointA):r.pointA,"pin"===r.render.type)n.beginPath(),n.arc(a.x,a.y,3,0,2*Math.PI),n.closePath();else{if(s=l?c.add(l.position,r.pointB):r.pointB,n.beginPath(),n.moveTo(a.x,a.y),"spring"===r.render.type)for(var d,p=c.sub(s,a),f=c.perp(c.normalise(p)),v=Math.ceil(o.clamp(r.length/5,12,20)),h=1;h<v;h+=1)d=h%2==0?1:-1,n.lineTo(a.x+p.x*(h/v)+f.x*d*4,a.y+p.y*(h/v)+f.y*d*4);n.lineTo(s.x,s.y)}r.render.lineWidth&&(n.lineWidth=r.render.lineWidth,n.strokeStyle=r.render.strokeStyle,n.stroke()),r.render.anchors&&(n.fillStyle=r.render.strokeStyle,n.beginPath(),n.arc(a.x,a.y,3,0,2*Math.PI),n.arc(s.x,s.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},i.bodies=function(e,t,n){var i,o,r,a,s=n,c=(e.engine,e.options),u=c.showInternalEdges||!c.wireframes;for(r=0;r<t.length;r++)if((i=t[r]).render.visible)for(a=i.parts.length>1?1:0;a<i.parts.length;a++)if((o=i.parts[a]).render.visible){if(c.showSleeping&&i.isSleeping?s.globalAlpha=.5*o.render.opacity:1!==o.render.opacity&&(s.globalAlpha=o.render.opacity),o.render.sprite&&o.render.sprite.texture&&!c.wireframes){var l=o.render.sprite,d=f(e,l.texture);s.translate(o.position.x,o.position.y),s.rotate(o.angle),s.drawImage(d,d.width*-l.xOffset*l.xScale,d.height*-l.yOffset*l.yScale,d.width*l.xScale,d.height*l.yScale),s.rotate(-o.angle),s.translate(-o.position.x,-o.position.y)}else{if(o.circleRadius)s.beginPath(),s.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);else{s.beginPath(),s.moveTo(o.vertices[0].x,o.vertices[0].y);for(var p=1;p<o.vertices.length;p++)!o.vertices[p-1].isInternal||u?s.lineTo(o.vertices[p].x,o.vertices[p].y):s.moveTo(o.vertices[p].x,o.vertices[p].y),o.vertices[p].isInternal&&!u&&s.moveTo(o.vertices[(p+1)%o.vertices.length].x,o.vertices[(p+1)%o.vertices.length].y);s.lineTo(o.vertices[0].x,o.vertices[0].y),s.closePath()}c.wireframes?(s.lineWidth=1,s.strokeStyle="#bbb",s.stroke()):(s.fillStyle=o.render.fillStyle,o.render.lineWidth&&(s.lineWidth=o.render.lineWidth,s.strokeStyle=o.render.strokeStyle,s.stroke()),s.fill())}s.globalAlpha=1}},i.bodyWireframes=function(e,t,n){var i,o,r,a,s,c=n,u=e.options.showInternalEdges;for(c.beginPath(),r=0;r<t.length;r++)if((i=t[r]).render.visible)for(s=i.parts.length>1?1:0;s<i.parts.length;s++){for(o=i.parts[s],c.moveTo(o.vertices[0].x,o.vertices[0].y),a=1;a<o.vertices.length;a++)!o.vertices[a-1].isInternal||u?c.lineTo(o.vertices[a].x,o.vertices[a].y):c.moveTo(o.vertices[a].x,o.vertices[a].y),o.vertices[a].isInternal&&!u&&c.moveTo(o.vertices[(a+1)%o.vertices.length].x,o.vertices[(a+1)%o.vertices.length].y);c.lineTo(o.vertices[0].x,o.vertices[0].y)}c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()},i.bodyConvexHulls=function(e,t,n){var i,o,r,a=n;for(a.beginPath(),o=0;o<t.length;o++)if((i=t[o]).render.visible&&1!==i.parts.length){for(a.moveTo(i.vertices[0].x,i.vertices[0].y),r=1;r<i.vertices.length;r++)a.lineTo(i.vertices[r].x,i.vertices[r].y);a.lineTo(i.vertices[0].x,i.vertices[0].y)}a.lineWidth=1,a.strokeStyle="rgba(255,255,255,0.2)",a.stroke()},i.vertexNumbers=function(e,t,n){var i,o,r,a=n;for(i=0;i<t.length;i++){var s=t[i].parts;for(r=s.length>1?1:0;r<s.length;r++){var c=s[r];for(o=0;o<c.vertices.length;o++)a.fillStyle="rgba(255,255,255,0.2)",a.fillText(i+"_"+o,c.position.x+.8*(c.vertices[o].x-c.position.x),c.position.y+.8*(c.vertices[o].y-c.position.y))}}},i.mousePosition=function(e,t,n){var i=n;i.fillStyle="rgba(255,255,255,0.8)",i.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},i.bodyBounds=function(e,t,n){var i=n,o=(e.engine,e.options);i.beginPath();for(var r=0;r<t.length;r++)if(t[r].render.visible)for(var a=t[r].parts,s=a.length>1?1:0;s<a.length;s++){var c=a[s];i.rect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}o.wireframes?i.strokeStyle="rgba(255,255,255,0.08)":i.strokeStyle="rgba(0,0,0,0.1)",i.lineWidth=1,i.stroke()},i.bodyAxes=function(e,t,n){var i,o,r,a,s=n,c=(e.engine,e.options);for(s.beginPath(),o=0;o<t.length;o++){var u=t[o],l=u.parts;if(u.render.visible)if(c.showAxes)for(r=l.length>1?1:0;r<l.length;r++)for(i=l[r],a=0;a<i.axes.length;a++){var d=i.axes[a];s.moveTo(i.position.x,i.position.y),s.lineTo(i.position.x+20*d.x,i.position.y+20*d.y)}else for(r=l.length>1?1:0;r<l.length;r++)for(i=l[r],a=0;a<i.axes.length;a++)s.moveTo(i.position.x,i.position.y),s.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2)}c.wireframes?(s.strokeStyle="indianred",s.lineWidth=1):(s.strokeStyle="rgba(255, 255, 255, 0.4)",s.globalCompositeOperation="overlay",s.lineWidth=2),s.stroke(),s.globalCompositeOperation="source-over"},i.bodyPositions=function(e,t,n){var i,o,r,a,s=n,c=(e.engine,e.options);for(s.beginPath(),r=0;r<t.length;r++)if((i=t[r]).render.visible)for(a=0;a<i.parts.length;a++)o=i.parts[a],s.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),s.closePath();for(c.wireframes?s.fillStyle="indianred":s.fillStyle="rgba(0,0,0,0.5)",s.fill(),s.beginPath(),r=0;r<t.length;r++)(i=t[r]).render.visible&&(s.arc(i.positionPrev.x,i.positionPrev.y,2,0,2*Math.PI,!1),s.closePath());s.fillStyle="rgba(255,165,0,0.8)",s.fill()},i.bodyVelocity=function(e,t,n){var i=n;i.beginPath();for(var o=0;o<t.length;o++){var r=t[o];r.render.visible&&(i.moveTo(r.position.x,r.position.y),i.lineTo(r.position.x+2*(r.position.x-r.positionPrev.x),r.position.y+2*(r.position.y-r.positionPrev.y)))}i.lineWidth=3,i.strokeStyle="cornflowerblue",i.stroke()},i.bodyIds=function(e,t,n){var i,o,r=n;for(i=0;i<t.length;i++)if(t[i].render.visible){var a=t[i].parts;for(o=a.length>1?1:0;o<a.length;o++){var s=a[o];r.font="12px Arial",r.fillStyle="rgba(255,255,255,0.5)",r.fillText(s.id,s.position.x+10,s.position.y-10)}}},i.collisions=function(e,t,n){var i,o,r,a,s=n,c=e.options;for(s.beginPath(),r=0;r<t.length;r++)if((i=t[r]).isActive)for(o=i.collision,a=0;a<i.activeContacts.length;a++){var u=i.activeContacts[a].vertex;s.rect(u.x-1.5,u.y-1.5,3.5,3.5)}for(c.wireframes?s.fillStyle="rgba(255,255,255,0.7)":s.fillStyle="orange",s.fill(),s.beginPath(),r=0;r<t.length;r++)if((i=t[r]).isActive&&(o=i.collision,i.activeContacts.length>0)){var l=i.activeContacts[0].vertex.x,d=i.activeContacts[0].vertex.y;2===i.activeContacts.length&&(l=(i.activeContacts[0].vertex.x+i.activeContacts[1].vertex.x)/2,d=(i.activeContacts[0].vertex.y+i.activeContacts[1].vertex.y)/2),o.bodyB===o.supports[0].body||!0===o.bodyA.isStatic?s.moveTo(l-8*o.normal.x,d-8*o.normal.y):s.moveTo(l+8*o.normal.x,d+8*o.normal.y),s.lineTo(l,d)}c.wireframes?s.strokeStyle="rgba(255,165,0,0.7)":s.strokeStyle="orange",s.lineWidth=1,s.stroke()},i.separations=function(e,t,n){var i,o,r,a,s,c=n,u=e.options;for(c.beginPath(),s=0;s<t.length;s++)if((i=t[s]).isActive){r=(o=i.collision).bodyA;var l=1;(a=o.bodyB).isStatic||r.isStatic||(l=.5),a.isStatic&&(l=0),c.moveTo(a.position.x,a.position.y),c.lineTo(a.position.x-o.penetration.x*l,a.position.y-o.penetration.y*l),l=1,a.isStatic||r.isStatic||(l=.5),r.isStatic&&(l=0),c.moveTo(r.position.x,r.position.y),c.lineTo(r.position.x+o.penetration.x*l,r.position.y+o.penetration.y*l)}u.wireframes?c.strokeStyle="rgba(255,165,0,0.5)":c.strokeStyle="orange",c.stroke()},i.grid=function(e,t,n){var i=n;e.options.wireframes?i.strokeStyle="rgba(255,180,0,0.1)":i.strokeStyle="rgba(255,180,0,0.5)",i.beginPath();for(var r=o.keys(t.buckets),a=0;a<r.length;a++){var s=r[a];if(!(t.buckets[s].length<2)){var c=s.split(/C|R/);i.rect(.5+parseInt(c[1],10)*t.bucketWidth,.5+parseInt(c[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}i.lineWidth=1,i.stroke()},i.inspector=function(e,t){e.engine;var n,i=e.selected,o=e.render,r=o.options;if(r.hasBounds){var a=o.bounds.max.x-o.bounds.min.x,s=o.bounds.max.y-o.bounds.min.y,c=a/o.options.width,u=s/o.options.height;t.scale(1/c,1/u),t.translate(-o.bounds.min.x,-o.bounds.min.y)}for(var l=0;l<i.length;l++){var d=i[l].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),d.type){case"body":n=d.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var p=d.pointA;d.bodyA&&(p=d.pointB),t.beginPath(),t.arc(p.x,p.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),r.hasBounds&&t.setTransform(1,0,0,1,0,0)};var n=function(e,t){var n=e.engine,o=e.timing,r=o.historySize,a=n.timing.timestamp;o.delta=t-o.lastTime||i._goodDelta,o.lastTime=t,o.timestampElapsed=a-o.lastTimestamp||0,o.lastTimestamp=a,o.deltaHistory.unshift(o.delta),o.deltaHistory.length=Math.min(o.deltaHistory.length,r),o.engineDeltaHistory.unshift(n.timing.lastDelta),o.engineDeltaHistory.length=Math.min(o.engineDeltaHistory.length,r),o.timestampElapsedHistory.unshift(o.timestampElapsed),o.timestampElapsedHistory.length=Math.min(o.timestampElapsedHistory.length,r),o.engineElapsedHistory.unshift(n.timing.lastElapsed),o.engineElapsedHistory.length=Math.min(o.engineElapsedHistory.length,r),o.elapsedHistory.unshift(o.lastElapsed),o.elapsedHistory.length=Math.min(o.elapsedHistory.length,r)},l=function(e){for(var t=0,n=0;n<e.length;n+=1)t+=e[n];return t/e.length||0},d=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},p=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},f=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t,n)},v=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},function(e,t){var n={};e.exports=n,n.create=function(e){return{id:n.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},n.id=function(e){return e.body.id+"_"+e.index}},function(e,t,n){var i={};e.exports=i;var o=n(7),r=n(19),a=n(13),s=n(20),c=n(21),u=n(4),l=n(5),d=n(8),p=n(0),f=n(6);i.create=function(e){e=e||{};var t=p.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},grid:null,gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},e);return t.world=e.world||l.create({label:"World"}),t.grid=c.create(e.grid||e.broadphase),t.pairs=s.create(),t.world.gravity=t.gravity,t.broadphase=t.grid,t.metrics={},t},i.update=function(e,t,n){var f=p.now();t=t||1e3/60,n=n||1;var v,h,m=e.world,g=e.timing,y=e.grid;g.timestamp+=t*g.timeScale,g.lastDelta=t*g.timeScale;var x={timestamp:g.timestamp};u.trigger(e,"beforeUpdate",x);var b=l.allBodies(m),S=l.allConstraints(m);for(e.enableSleeping&&o.update(b,g.timeScale),i._bodiesApplyGravity(b,e.gravity),i._bodiesUpdate(b,t,g.timeScale,n,m.bounds),d.preSolveAll(b),h=0;h<e.constraintIterations;h++)d.solveAll(S,g.timeScale);d.postSolveAll(b),m.isModified&&c.clear(y),c.update(y,b,e,m.isModified),v=y.pairsList,m.isModified&&l.setModified(m,!1,!1,!0);var w=a.collisions(v,e),P=e.pairs,C=g.timestamp;for(s.update(P,w,C),s.removeOld(P,C),e.enableSleeping&&o.afterCollisions(P.list,g.timeScale),P.collisionStart.length>0&&u.trigger(e,"collisionStart",{pairs:P.collisionStart}),r.preSolvePosition(P.list),h=0;h<e.positionIterations;h++)r.solvePosition(P.list,g.timeScale);for(r.postSolvePosition(b),d.preSolveAll(b),h=0;h<e.constraintIterations;h++)d.solveAll(S,g.timeScale);for(d.postSolveAll(b),r.preSolveVelocity(P.list),h=0;h<e.velocityIterations;h++)r.solveVelocity(P.list,g.timeScale);return P.collisionActive.length>0&&u.trigger(e,"collisionActive",{pairs:P.collisionActive}),P.collisionEnd.length>0&&u.trigger(e,"collisionEnd",{pairs:P.collisionEnd}),i._bodiesClearForces(b),u.trigger(e,"afterUpdate",x),e.timing.lastElapsed=p.now()-f,e},i.merge=function(e,t){if(p.extend(e,t),t.world){e.world=t.world,i.clear(e);for(var n=l.allBodies(e.world),r=0;r<n.length;r++){var a=n[r];o.set(a,!1),a.id=p.nextId()}}},i.clear=function(e){var t=e.world,n=l.allBodies(t);s.clear(e.pairs),c.clear(e.grid),c.update(e.grid,n,e,!0)},i._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.force.x=0,n.force.y=0,n.torque=0}},i._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var i=0;i<e.length;i++){var o=e[i];o.isStatic||o.isSleeping||(o.force.y+=o.mass*t.y*n,o.force.x+=o.mass*t.x*n)}},i._bodiesUpdate=function(e,t,n,i,o){for(var r=0;r<e.length;r++){var a=e[r];a.isStatic||a.isSleeping||f.update(a,t,n,i)}}},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(2),a=n(0),s=n(1);i._restingThresh=4,i._restingThreshTangent=6,i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i.preSolvePosition=function(e){var t,n,i;for(t=0;t<e.length;t++)(n=e[t]).isActive&&(i=n.activeContacts.length,n.collision.parentA.totalContacts+=i,n.collision.parentB.totalContacts+=i)},i.solvePosition=function(e,t){var n,o,a,s,c,u,l,d,p,f=r._temp[0],v=r._temp[1],h=r._temp[2],m=r._temp[3];for(n=0;n<e.length;n++)(o=e[n]).isActive&&!o.isSensor&&(s=(a=o.collision).parentA,c=a.parentB,u=a.normal,l=r.sub(r.add(c.positionImpulse,c.position,f),r.add(s.positionImpulse,r.sub(c.position,a.penetration,v),h),m),o.separation=r.dot(u,l));for(n=0;n<e.length;n++)(o=e[n]).isActive&&!o.isSensor&&(s=(a=o.collision).parentA,c=a.parentB,u=a.normal,p=(o.separation-o.slop)*t,(s.isStatic||c.isStatic)&&(p*=2),s.isStatic||s.isSleeping||(d=i._positionDampen/s.totalContacts,s.positionImpulse.x+=u.x*p*d,s.positionImpulse.y+=u.y*p*d),c.isStatic||c.isSleeping||(d=i._positionDampen/c.totalContacts,c.positionImpulse.x-=u.x*p*d,c.positionImpulse.y-=u.y*p*d))},i.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var a=0;a<n.parts.length;a++){var c=n.parts[a];o.translate(c.vertices,n.positionImpulse),s.update(c.bounds,c.vertices,n.velocity),c.position.x+=n.positionImpulse.x,c.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,r.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=i._positionWarming,n.positionImpulse.y*=i._positionWarming)}}},i.preSolveVelocity=function(e){var t,n,i,o,a,s,c,u,l,d,p,f,v,h,m=r._temp[0],g=r._temp[1];for(t=0;t<e.length;t++)if((i=e[t]).isActive&&!i.isSensor)for(o=i.activeContacts,s=(a=i.collision).parentA,c=a.parentB,u=a.normal,l=a.tangent,n=0;n<o.length;n++)p=(d=o[n]).vertex,f=d.normalImpulse,v=d.tangentImpulse,0===f&&0===v||(m.x=u.x*f+l.x*v,m.y=u.y*f+l.y*v,s.isStatic||s.isSleeping||(h=r.sub(p,s.position,g),s.positionPrev.x+=m.x*s.inverseMass,s.positionPrev.y+=m.y*s.inverseMass,s.anglePrev+=r.cross(h,m)*s.inverseInertia),c.isStatic||c.isSleeping||(h=r.sub(p,c.position,g),c.positionPrev.x-=m.x*c.inverseMass,c.positionPrev.y-=m.y*c.inverseMass,c.anglePrev-=r.cross(h,m)*c.inverseInertia))},i.solveVelocity=function(e,t){for(var n=t*t,o=r._temp[0],s=r._temp[1],c=r._temp[2],u=r._temp[3],l=r._temp[4],d=r._temp[5],p=0;p<e.length;p++){var f=e[p];if(f.isActive&&!f.isSensor){var v=f.collision,h=v.parentA,m=v.parentB,g=v.normal,y=v.tangent,x=f.activeContacts,b=1/x.length;h.velocity.x=h.position.x-h.positionPrev.x,h.velocity.y=h.position.y-h.positionPrev.y,m.velocity.x=m.position.x-m.positionPrev.x,m.velocity.y=m.position.y-m.positionPrev.y,h.angularVelocity=h.angle-h.anglePrev,m.angularVelocity=m.angle-m.anglePrev;for(var S=0;S<x.length;S++){var w=x[S],P=w.vertex,C=r.sub(P,h.position,s),A=r.sub(P,m.position,c),M=r.add(h.velocity,r.mult(r.perp(C),h.angularVelocity),u),_=r.add(m.velocity,r.mult(r.perp(A),m.angularVelocity),l),I=r.sub(M,_,d),T=r.dot(g,I),k=r.dot(y,I),z=Math.abs(k),R=a.sign(k),E=(1+f.restitution)*T,O=a.clamp(f.separation+T,0,1)*i._frictionNormalMultiplier,B=k,F=1/0;z>f.friction*f.frictionStatic*O*n&&(F=z,B=a.clamp(f.friction*R*n,-F,F));var j=r.cross(C,g),D=r.cross(A,g),U=b/(h.inverseMass+m.inverseMass+h.inverseInertia*j*j+m.inverseInertia*D*D);if(E*=U,B*=U,T<0&&T*T>i._restingThresh*n)w.normalImpulse=0;else{var L=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+E,0),E=w.normalImpulse-L}if(k*k>i._restingThreshTangent*n)w.tangentImpulse=0;else{var N=w.tangentImpulse;w.tangentImpulse=a.clamp(w.tangentImpulse+B,-F,F),B=w.tangentImpulse-N}o.x=g.x*E+y.x*B,o.y=g.y*E+y.y*B,h.isStatic||h.isSleeping||(h.positionPrev.x+=o.x*h.inverseMass,h.positionPrev.y+=o.y*h.inverseMass,h.anglePrev+=r.cross(C,o)*h.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=o.x*m.inverseMass,m.positionPrev.y-=o.y*m.inverseMass,m.anglePrev-=r.cross(A,o)*m.inverseInertia)}}}}},function(e,t,n){var i={};e.exports=i;var o=n(9),r=n(0);i._pairMaxIdleLife=1e3,i.create=function(e){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},i.update=function(e,t,n){var i,r,a,s,c=e.list,u=e.table,l=e.collisionStart,d=e.collisionEnd,p=e.collisionActive;for(l.length=0,d.length=0,p.length=0,s=0;s<c.length;s++)c[s].confirmedActive=!1;for(s=0;s<t.length;s++)(i=t[s]).collided&&((a=u[r=o.id(i.bodyA,i.bodyB)])?(a.isActive?p.push(a):l.push(a),o.update(a,i,n),a.confirmedActive=!0):(a=o.create(i,n),u[r]=a,l.push(a),c.push(a)));for(s=0;s<c.length;s++)(a=c[s]).isActive&&!a.confirmedActive&&(o.setActive(a,!1,n),d.push(a))},i.removeOld=function(e,t){var n,o,r,a,s=e.list,c=e.table,u=[];for(a=0;a<s.length;a++)(o=(n=s[a]).collision).bodyA.isSleeping||o.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>i._pairMaxIdleLife&&u.push(a);for(a=0;a<u.length;a++)delete c[(n=s[r=u[a]-a]).id],s.splice(r,1)},i.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},function(e,t,n){var i={};e.exports=i;var o=n(9),r=n(0);i.create=function(e){return r.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},e)},i.update=function(e,t,n,o){var r,a,s,c,u,l=n.world,d=e.buckets,p=!1;for(r=0;r<t.length;r++){var f=t[r];if((!f.isSleeping||o)&&(!l.bounds||!(f.bounds.max.x<l.bounds.min.x||f.bounds.min.x>l.bounds.max.x||f.bounds.max.y<l.bounds.min.y||f.bounds.min.y>l.bounds.max.y))){var v=i._getRegion(e,f);if(!f.region||v.id!==f.region.id||o){f.region&&!o||(f.region=v);var h=i._regionUnion(v,f.region);for(a=h.startCol;a<=h.endCol;a++)for(s=h.startRow;s<=h.endRow;s++){c=d[u=i._getBucketId(a,s)];var m=a>=v.startCol&&a<=v.endCol&&s>=v.startRow&&s<=v.endRow,g=a>=f.region.startCol&&a<=f.region.endCol&&s>=f.region.startRow&&s<=f.region.endRow;!m&&g&&g&&c&&i._bucketRemoveBody(e,c,f),(f.region===v||m&&!g||o)&&(c||(c=i._createBucket(d,u)),i._bucketAddBody(e,c,f))}f.region=v,p=!0}}}p&&(e.pairsList=i._createActivePairsList(e))},i.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},i._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),o=Math.max(e.endCol,t.endCol),r=Math.min(e.startRow,t.startRow),a=Math.max(e.endRow,t.endRow);return i._createRegion(n,o,r,a)},i._getRegion=function(e,t){var n=t.bounds,o=Math.floor(n.min.x/e.bucketWidth),r=Math.floor(n.max.x/e.bucketWidth),a=Math.floor(n.min.y/e.bucketHeight),s=Math.floor(n.max.y/e.bucketHeight);return i._createRegion(o,r,a,s)},i._createRegion=function(e,t,n,i){return{id:e+","+t+","+n+","+i,startCol:e,endCol:t,startRow:n,endRow:i}},i._getBucketId=function(e,t){return"C"+e+"R"+t},i._createBucket=function(e,t){return e[t]=[]},i._bucketAddBody=function(e,t,n){for(var i=0;i<t.length;i++){var r=t[i];if(!(n.id===r.id||n.isStatic&&r.isStatic)){var a=o.id(n,r),s=e.pairs[a];s?s[2]+=1:e.pairs[a]=[n,r,1]}}t.push(n)},i._bucketRemoveBody=function(e,t,n){t.splice(r.indexOf(t,n),1);for(var i=0;i<t.length;i++){var a=t[i],s=o.id(n,a),c=e.pairs[s];c&&(c[2]-=1)}},i._createActivePairsList=function(e){var t,n,i=[];t=r.keys(e.pairs);for(var o=0;o<t.length;o++)(n=e.pairs[t[o]])[2]>0?i.push(n):delete e.pairs[t[o]];return i}},function(e,t,n){var i=e.exports=n(23);i.Axes=n(10),i.Bodies=n(11),i.Body=n(6),i.Bounds=n(1),i.Common=n(0),i.Composite=n(5),i.Composites=n(24),i.Constraint=n(8),i.Contact=n(17),i.Detector=n(13),i.Engine=n(18),i.Events=n(4),i.Grid=n(21),i.Mouse=n(12),i.MouseConstraint=n(25),i.Pair=n(9),i.Pairs=n(20),i.Plugin=n(15),i.Query=n(26),i.Render=n(16),i.Resolver=n(19),i.Runner=n(27),i.SAT=n(14),i.Sleeping=n(7),i.Svg=n(28),i.Vector=n(2),i.Vertices=n(3),i.World=n(29),i.Engine.run=i.Runner.run,i.Common.deprecated(i.Engine,"run","Engine.run âž¤ use Matter.Runner.run(engine) instead")},function(e,t,n){var i={};e.exports=i;var o=n(15),r=n(0);i.name="matter-js",i.version="0.17.1",i.uses=[],i.used=[],i.use=function(){o.use(i,Array.prototype.slice.call(arguments))},i.before=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathBefore(i,e,t)},i.after=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathAfter(i,e,t)}},function(e,t,n){var i={};e.exports=i;var o=n(5),r=n(8),a=n(0),s=n(6),c=n(11),u=a.deprecated;i.stack=function(e,t,n,i,r,a,c){for(var u,l=o.create({label:"Stack"}),d=e,p=t,f=0,v=0;v<i;v++){for(var h=0,m=0;m<n;m++){var g=c(d,p,m,v,u,f);if(g){var y=g.bounds.max.y-g.bounds.min.y,x=g.bounds.max.x-g.bounds.min.x;y>h&&(h=y),s.translate(g,{x:.5*x,y:.5*y}),d=g.bounds.max.x+r,o.addBody(l,g),u=g,f+=1}else d+=r}p+=h+a,d=e}return l},i.chain=function(e,t,n,i,s,c){for(var u=e.bodies,l=1;l<u.length;l++){var d=u[l-1],p=u[l],f=d.bounds.max.y-d.bounds.min.y,v=d.bounds.max.x-d.bounds.min.x,h=p.bounds.max.y-p.bounds.min.y,m={bodyA:d,pointA:{x:v*t,y:f*n},bodyB:p,pointB:{x:(p.bounds.max.x-p.bounds.min.x)*i,y:h*s}},g=a.extend(m,c);o.addConstraint(e,r.create(g))}return e.label+=" Chain",e},i.mesh=function(e,t,n,i,s){var c,u,l,d,p,f=e.bodies;for(c=0;c<n;c++){for(u=1;u<t;u++)l=f[u-1+c*t],d=f[u+c*t],o.addConstraint(e,r.create(a.extend({bodyA:l,bodyB:d},s)));if(c>0)for(u=0;u<t;u++)l=f[u+(c-1)*t],d=f[u+c*t],o.addConstraint(e,r.create(a.extend({bodyA:l,bodyB:d},s))),i&&u>0&&(p=f[u-1+(c-1)*t],o.addConstraint(e,r.create(a.extend({bodyA:p,bodyB:d},s)))),i&&u<t-1&&(p=f[u+1+(c-1)*t],o.addConstraint(e,r.create(a.extend({bodyA:p,bodyB:d},s))))}return e.label+=" Mesh",e},i.pyramid=function(e,t,n,o,r,a,c){return i.stack(e,t,n,o,r,a,(function(t,i,a,u,l,d){var p=Math.min(o,Math.ceil(n/2)),f=l?l.bounds.max.x-l.bounds.min.x:0;if(!(u>p||a<(u=p-u)||a>n-1-u))return 1===d&&s.translate(l,{x:(a+(n%2==1?1:-1))*f,y:0}),c(e+(l?a*f:0)+a*r,i,a,u,l,d)}))},i.newtonsCradle=function(e,t,n,i,a){for(var s=o.create({label:"Newtons Cradle"}),u=0;u<n;u++){var l=c.circle(e+u*(1.9*i),t+a,i,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),d=r.create({pointA:{x:e+u*(1.9*i),y:t},bodyB:l});o.addBody(s,l),o.addConstraint(s,d)}return s},u(i,"newtonsCradle","Composites.newtonsCradle âž¤ moved to newtonsCradle example"),i.car=function(e,t,n,i,a){var u=s.nextGroup(!0),l=.5*-n+20,d=.5*n-20,p=o.create({label:"Car"}),f=c.rectangle(e,t,n,i,{collisionFilter:{group:u},chamfer:{radius:.5*i},density:2e-4}),v=c.circle(e+l,t+0,a,{collisionFilter:{group:u},friction:.8}),h=c.circle(e+d,t+0,a,{collisionFilter:{group:u},friction:.8}),m=r.create({bodyB:f,pointB:{x:l,y:0},bodyA:v,stiffness:1,length:0}),g=r.create({bodyB:f,pointB:{x:d,y:0},bodyA:h,stiffness:1,length:0});return o.addBody(p,f),o.addBody(p,v),o.addBody(p,h),o.addConstraint(p,m),o.addConstraint(p,g),p},u(i,"car","Composites.car âž¤ moved to car example"),i.softBody=function(e,t,n,o,r,s,u,l,d,p){d=a.extend({inertia:1/0},d),p=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var f=i.stack(e,t,n,o,r,s,(function(e,t){return c.circle(e,t,l,d)}));return i.mesh(f,n,o,u,p),f.label="Soft Body",f},u(i,"softBody","Composites.softBody âž¤ moved to softBody and cloth examples")},function(e,t,n){var i={};e.exports=i;var o=n(3),r=n(7),a=n(12),s=n(4),c=n(13),u=n(8),l=n(5),d=n(0),p=n(1);i.create=function(e,t){var n=(e?e.mouse:null)||(t?t.mouse:null);n||(e&&e.render&&e.render.canvas?n=a.create(e.render.canvas):t&&t.element?n=a.create(t.element):(n=a.create(),d.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var o={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:u.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},r=d.extend(o,t);return s.on(e,"beforeUpdate",(function(){var t=l.allBodies(e.world);i.update(r,t),i._triggerEvents(r)})),r},i.update=function(e,t){var n=e.mouse,i=e.constraint,a=e.body;if(0===n.button){if(i.bodyB)r.set(i.bodyB,!1),i.pointA=n.position;else for(var u=0;u<t.length;u++)if(a=t[u],p.contains(a.bounds,n.position)&&c.canCollide(a.collisionFilter,e.collisionFilter))for(var l=a.parts.length>1?1:0;l<a.parts.length;l++){var d=a.parts[l];if(o.contains(d.vertices,n.position)){i.pointA=n.position,i.bodyB=e.body=a,i.pointB={x:n.position.x-a.position.x,y:n.position.y-a.position.y},i.angleB=a.angle,r.set(a,!1),s.trigger(e,"startdrag",{mouse:n,body:a});break}}}else i.bodyB=e.body=null,i.pointB=null,a&&s.trigger(e,"enddrag",{mouse:n,body:a})},i._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&s.trigger(e,"mousemove",{mouse:t}),n.mousedown&&s.trigger(e,"mousedown",{mouse:t}),n.mouseup&&s.trigger(e,"mouseup",{mouse:t}),a.clearSourceEvents(t)}},function(e,t,n){var i={};e.exports=i;var o=n(2),r=n(14),a=n(1),s=n(11),c=n(3);i.collides=function(e,t){for(var n=[],i=0;i<t.length;i++){var o=t[i];if(a.overlaps(o.bounds,e.bounds))for(var s=1===o.parts.length?0:1;s<o.parts.length;s++){var c=o.parts[s];if(a.overlaps(c.bounds,e.bounds)){var u=r.collides(c,e);if(u.collided){n.push(u);break}}}}return n},i.ray=function(e,t,n,r){r=r||1e-100;for(var a=o.angle(t,n),c=o.magnitude(o.sub(t,n)),u=.5*(n.x+t.x),l=.5*(n.y+t.y),d=s.rectangle(u,l,c,r,{angle:a}),p=i.collides(d,e),f=0;f<p.length;f+=1){var v=p[f];v.body=v.bodyB=v.bodyA}return p},i.region=function(e,t,n){for(var i=[],o=0;o<e.length;o++){var r=e[o],s=a.overlaps(r.bounds,t);(s&&!n||!s&&n)&&i.push(r)}return i},i.point=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i];if(a.contains(o.bounds,t))for(var r=1===o.parts.length?0:1;r<o.parts.length;r++){var s=o.parts[r];if(a.contains(s.bounds,t)&&c.contains(s.vertices,t)){n.push(o);break}}}return n}},function(e,t,n){var i={};e.exports=i;var o,r,a,s=n(4),c=n(18),u=n(0);"undefined"!=typeof window&&(o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o||(o=function(e){a=setTimeout((function(){e(u.now())}),1e3/60)},r=function(){clearTimeout(a)}),i.create=function(e){var t=u.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},i.run=function(e,t){return void 0!==e.positionIterations&&(t=e,e=i.create()),function n(r){e.frameRequestId=o(n),r&&e.enabled&&i.tick(e,t,r)}(),e},i.tick=function(e,t,n){var i,o=t.timing,r=1,a={timestamp:o.timestamp};s.trigger(e,"beforeTick",a),e.isFixed?i=e.delta:(i=n-e.timePrev||e.delta,e.timePrev=n,e.deltaHistory.push(i),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),r=(i=(i=(i=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:i)>e.deltaMax?e.deltaMax:i)/e.delta,e.delta=i),0!==e.timeScalePrev&&(r*=o.timeScale/e.timeScalePrev),0===o.timeScale&&(r=0),e.timeScalePrev=o.timeScale,e.correction=r,e.frameCounter+=1,n-e.counterTimestamp>=1e3&&(e.fps=e.frameCounter*((n-e.counterTimestamp)/1e3),e.counterTimestamp=n,e.frameCounter=0),s.trigger(e,"tick",a),s.trigger(e,"beforeUpdate",a),c.update(t,i,r),s.trigger(e,"afterUpdate",a),s.trigger(e,"afterTick",a)},i.stop=function(e){r(e.frameRequestId)},i.start=function(e,t){i.run(e,t)}},function(e,t,n){var i={};e.exports=i,n(1);var o=n(0);i.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,r,a,s,c,u,l,d,p,f,v,h=[],m=0,g=0,y=0;t=t||15;var x=function(e,t,n){var i=n%2==1&&n>1;if(!p||e!=p.x||t!=p.y){p&&i?(f=p.x,v=p.y):(f=0,v=0);var o={x:f+e,y:v+t};!i&&p||(p=o),h.push(o),g=f+e,y=v+t}},b=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":g=e.x,y=e.y;break;case"H":g=e.x;break;case"V":y=e.y}x(g,y,e.pathSegType)}};for(i._svgPathToAbsolute(e),a=e.getTotalLength(),u=[],n=0;n<e.pathSegList.numberOfItems;n+=1)u.push(e.pathSegList.getItem(n));for(l=u.concat();m<a;){if((c=u[e.getPathSegAtLength(m)])!=d){for(;l.length&&l[0]!=c;)b(l.shift());d=c}switch(c.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":s=e.getPointAtLength(m),x(s.x,s.y,0)}m+=t}for(n=0,r=l.length;n<r;++n)b(l[n]);return h},i._svgPathToAbsolute=function(e){for(var t,n,i,o,r,a,s=e.pathSegList,c=0,u=0,l=s.numberOfItems,d=0;d<l;++d){var p=s.getItem(d),f=p.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(f))"x"in p&&(c=p.x),"y"in p&&(u=p.y);else switch("x1"in p&&(i=c+p.x1),"x2"in p&&(r=c+p.x2),"y1"in p&&(o=u+p.y1),"y2"in p&&(a=u+p.y2),"x"in p&&(c+=p.x),"y"in p&&(u+=p.y),f){case"m":s.replaceItem(e.createSVGPathSegMovetoAbs(c,u),d);break;case"l":s.replaceItem(e.createSVGPathSegLinetoAbs(c,u),d);break;case"h":s.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(c),d);break;case"v":s.replaceItem(e.createSVGPathSegLinetoVerticalAbs(u),d);break;case"c":s.replaceItem(e.createSVGPathSegCurvetoCubicAbs(c,u,i,o,r,a),d);break;case"s":s.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(c,u,r,a),d);break;case"q":s.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(c,u,i,o),d);break;case"t":s.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(c,u),d);break;case"a":s.replaceItem(e.createSVGPathSegArcAbs(c,u,p.r1,p.r2,p.angle,p.largeArcFlag,p.sweepFlag),d);break;case"z":case"Z":c=t,u=n}"M"!=f&&"m"!=f||(t=c,n=u)}}},function(e,t,n){var i={};e.exports=i;var o=n(5);n(0),i.create=o.create,i.add=o.add,i.remove=o.remove,i.clear=o.clear,i.addComposite=o.addComposite,i.addBody=o.addBody,i.addConstraint=o.addConstraint}])},e.exports=n()}).call(this,n(52))},377:function(e,t,n){"use strict";var i=n(250);t.a=function(e,t){var n=e.textures,o=n.textureBindings,r=o.get(t);return r||(r=function(){return Object(i.a)(e,t,n.nextTextureUnit++)},o.set(t,r)),r}},380:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(110),o=n.n(i),r=n(111),a=n.n(r),s=n(109),c=n.n(s),u=n(19),l=n(214),d=function(){function e(t,n,i){var r=this;o()(this,e),c()(this,"isPaused",!1),c()(this,"isIntersecting",!1),c()(this,"onIntersection",(function(e){r.isIntersecting=e,r.updatePlayState(),r.isIntersecting&&r.isPaused&&r.instance.renderFrame()})),c()(this,"setPaused",(function(e){r.isPaused=e,r.updatePlayState()})),c()(this,"togglePaused",(function(){r.setPaused(!r.isPaused)})),c()(this,"onResize",(function(){r.instance.refresh()})),this.instance=new t(n,i),this.node=n,i.reduceMotion&&(this.isPaused=!0),this.bindListeners()}return a()(e,[{key:"bindListeners",value:function(){this.intersectionScroll=new l.a(this.node,{onIntersection:this.onIntersection,onProgress:this.instance.onScrollProgress}),u.a.on(this.onResize)}},{key:"unbindListeners",value:function(){this.intersectionScroll.destroy(),u.a.off(this.onResize)}},{key:"detach",value:function(){this.unbindListeners(),this.instance.detach(),this.node=null}},{key:"attach",value:function(e){this.node=e,this.bindListeners(),this.instance.attach(e)}},{key:"updatePlayState",value:function(){!this.isIntersecting||this.isPaused?this.instance.stop():this.instance.start()}},{key:"setProps",value:function(e){this.instance.setProps(e)}},{key:"refresh",value:function(){this.instance.refresh()}},{key:"destroy",value:function(){this.unbindListeners(),this.instance.destroy()}},{key:"props",get:function(){return this.instance.props}},{key:"autoUpdate",get:function(){return this.instance.autoUpdate}},{key:"isSupported",get:function(){return this.instance.isSupported}}]),e}()},381:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return i}));var i=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},382:function(e,t,n){"use strict";var i=n(497),o=n.n(i),r=n(498),a=n.n(r),s=n(499),c=n.n(s),u=n(501),l=n.n(u),d=n(502),p=n.n(d);t.a={distance:a.a,copy:o.a,sub:c.a,set:l.a,normalize:p.a,setScalar:function(e,t){return e[0]=t,e[1]=t,e[2]=t,e}}},383:function(e,t,n){"use strict";t.a=function(e,t){return function(n){return(Array.isArray(n)?n:[n]).some((function(n){return e[n]!==t[n]}))}}},384:function(e,t,n){"use strict";var i=function(e,t,n,i,o,r,a){var s=1/(t-n),c=1/(i-o),u=1/(r-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(o+i)*c,e[14]=(a+r)*u,e[15]=1,e};t.a=function(e){i(e.projectionMatrix,e.left,e.right,e.bottom,e.top,e.near,e.far)}},496:function(e,t,n){"use strict";var i=n(112),o=function(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e};t.a=function e(){Object(i.a)(this,e),Object(i.f)(this,"parent",null),Object(i.f)(this,"children",[]),Object(i.f)(this,"pivot",[0,0]),Object(i.f)(this,"position",[0,0]),Object(i.f)(this,"scale",[1,1]),Object(i.f)(this,"rotation",0),Object(i.f)(this,"matrix",o()),Object(i.f)(this,"worldMatrix",o()),Object(i.f)(this,"matrixAutoUpdate",!0),Object(i.f)(this,"worldMatrixNeedsUpdate",!1)}},497:function(e,t){e.exports=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},498:function(e,t){e.exports=function(e,t){var n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+i*i+o*o)}},499:function(e,t,n){e.exports=n(500)},500:function(e,t){e.exports=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}},501:function(e,t){e.exports=function(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}},502:function(e,t){e.exports=function(e,t){var n=t[0],i=t[1],o=t[2],r=n*n+i*i+o*o;r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r);return e}},503:function(e,t,n){"use strict";t.a=function(e,t){var n=e.children.indexOf(t);return-1!==n&&(e.children.splice(n,1),t.parent=null),t}},504:function(e,t,n){var i;i=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/libs",n(n.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var i=n(0),o={name:"matter-wrap",version:"0.1.3",for:"matter-js@^0.12.0",install:function(e){e.after("Engine.update",(function(){o.Engine.update(this)}))},Engine:{update:function(e){for(var t=e.world,n=i.Composite.allBodies(t),r=i.Composite.allComposites(t),a=0;a<n.length;a+=1){var s=n[a];s.plugin.wrap&&o.Body.wrap(s,s.plugin.wrap)}for(a=0;a<r.length;a+=1){var c=r[a];c.plugin.wrap&&o.Composite.wrap(c,c.plugin.wrap)}}},Bounds:{wrap:function(e,t){var n=null,i=null;if(void 0!==t.min.x&&void 0!==t.max.x&&(e.min.x>t.max.x?n=t.min.x-e.max.x:e.max.x<t.min.x&&(n=t.max.x-e.min.x)),void 0!==t.min.y&&void 0!==t.max.y&&(e.min.y>t.max.y?i=t.min.y-e.max.y:e.max.y<t.min.y&&(i=t.max.y-e.min.y)),null!==n||null!==i)return{x:n||0,y:i||0}}},Body:{wrap:function(e,t){var n=o.Bounds.wrap(e.bounds,t);return n&&i.Body.translate(e,n),n}},Composite:{bounds:function(e){for(var t=i.Composite.allBodies(e),n=[],o=0;o<t.length;o+=1){var r=t[o];n.push(r.bounds.min,r.bounds.max)}return i.Bounds.create(n)},wrap:function(e,t){var n=o.Bounds.wrap(o.Composite.bounds(e),t);return n&&i.Composite.translate(e,n),n}}};i.Plugin.register(o),e.exports=o}])},e.exports=i(n(310))},950:function(e,t,n){"use strict";var i=n(196),o=n(251),r=n(194),a=n(195),s=n(309);t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=void 0===t?2:t,c=e.height,u=void 0===c?2:c,l=e.position,d=void 0===l?o.b:l,p=e.uv,f=void 0===p?o.c:p,v=e.uvArray,h=void 0===v?[0,1,1,1,1,0,0,0]:v,m=new r.a,g=.5*n,y=.5*u;return d&&Object(a.a)(m,d,new i.a({array:new Float32Array([-g,y,g,y,g,-y,-g,-y]),itemSize:2})),f&&Object(a.a)(m,f,new i.a({array:new Float32Array(h),itemSize:2})),Object(s.a)(m,new Uint8Array([2,1,0,2,0,3])),m}},951:function(e,t,n){"use strict";var i=n(112),o=n(381);t.a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.left,r=void 0===n?-1:n,a=t.right,s=void 0===a?1:a,c=t.bottom,u=void 0===c?-1:c,l=t.top,d=void 0===l?1:l,p=t.near,f=void 0===p?0:p,v=t.far,h=void 0===v?1:v;Object(i.a)(this,e),this.left=r,this.right=s,this.bottom=u,this.top=d,this.near=f,this.far=h,this.position=[1,1,1],this.target=[0,0,0],this.viewMatrix=Object(o.b)([]),this.projectionMatrix=Object(o.b)([]),this.up=[0,1,0]}},952:function(e,t,n){"use strict";var i=n(112),o=function(e){Object(i.d)(n,e);var t=Object(i.e)(n);function n(e){var o=e.geometry,r=e.material,a=e.offset,s=void 0===a?0:a,c=e.count,u=void 0===c?o.index.count:c;return Object(i.a)(this,n),t.call(this,{geometry:o,material:r,offset:s,count:u})}return Object(i.c)(n,[{key:"draw",value:function(e){e.drawElements(this.mode,this.index.count,this.index.type,this.offset)}}]),n}(n(249).a);t.a=o},953:function(e,t,n){"use strict";var i=n(112),o=function(e){Object(i.d)(n,e);var t=Object(i.e)(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(i.a)(this,n),e=t.call(this),Object(i.f)(Object(i.j)(e),"visible",!0),e.drawInfo=o,e}return n}(n(496).a);t.a=o},954:function(e,t,n){"use strict";var i=n(503);t.a=function(e,t){return t.parent&&Object(i.a)(t.parent,t),!1===e.children.includes(t)&&(e.children.push(t),t.parent=e),t}},955:function(e,t,n){"use strict";var i="blendEquation";t.a=function(e,t,n){var o=void 0===n?"".concat(t):"".concat(t,"-").concat(n);e.get(i)!==o&&(void 0===n?e.gl.blendEquation(t):e.gl.blendEquationSeparate(t,n),e.set(i,o))}},956:function(e,t,n){"use strict";t.a=function(e,t,n,i,o){var r=void 0===i?"".concat(t,"-").concat(n):"".concat(t,"-").concat(n,"-").concat(i,"-").concat(o);e.get("blendFunc")!==r&&(void 0===i?e.gl.blendFunc(t,n):e.gl.blendFuncSeparate(t,n,i,o),e.set("blendFunc",r))}},957:function(e,t,n){"use strict";var i=n(384);t.a=function(e){var t=e.camera,n=e.x,o=void 0===n?0:n,r=e.y,a=void 0===r?0:r,s=e.width,c=void 0===s?2:s,u=e.height,l=void 0===u?2:u;return t.left=o,t.top=a,t.right=o+c,t.bottom=a+l,Object(i.a)(t),t}},984:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ze}));n(0);var i=n(110),o=n.n(i),r=n(111),a=n.n(r),s=n(142),c=n.n(s),u=n(136),l=n.n(u),d=n(137),p=n.n(d),f=n(132),v=n.n(f),h=n(109),m=n.n(h),g=n(113),y=n(375),x=n(950),b=n(248),S=n(377),w=n(112),P=n(494),C=function e(t){var n=t.width,i=t.height,o=t.generateDepth,r=void 0!==o&&o,a=t.generateStencil,s=void 0!==a&&a,c=t.textureOptions;Object(w.a)(this,e),this.width=n,this.height=i,this.generateDepth=r,this.generateStencil=s,this.texture=new b.a(c),this.textureOptions=c},A=n(301);var M=function(e,t){var n=e.properties.get(t);Object(A.a)(e,t.texture),n.glFrameBuffer&&(e.gl.deleteFramebuffer(n.glFrameBuffer),delete n.glFrameBuffer),n.glRenderBuffer&&(e.gl.deleteRenderbuffer(n.glRenderBuffer),delete n.glRenderBuffer),e.properties.remove(t)},_=n(300);var I=function(e){return new C({width:e.width,height:e.height,generateDepth:e.generateDepth,generateStencil:e.generateStencil,textureOptions:e.textureOptions?Object(w.g)({},e.textureOptions):void 0})},T=n(302);var k=function(e,t,n,i){M(e,t),t.width=n,t.height=i},z=function(){function e(t){var n=t.renderer,i=t.textureOptions,o=t.screenGeometry,r=void 0===o?Object(P.a)():o;Object(w.a)(this,e),this.renderer=n,this.renderTargetTextureOptions=i,this.screenGeometry=r,this.passes=[]}return Object(w.c)(e,[{key:"addPass",value:function(e,t){e.init(this),void 0!==t?this.passes.splice(t,0,e):this.passes.push(e)}},{key:"removePass",value:function(e){return Object(_.a)(this.passes,e)}},{key:"setSize",value:function(e,t){e===this.width&&t===this.height||(this.width=e,this.height=t,this.inputRenderTarget?(k(this.renderer,this.inputRenderTarget,e,t),k(this.renderer,this.outputRenderTarget,e,t)):(this.inputRenderTarget=new C({width:e,height:t,textureOptions:this.renderTargetTextureOptions}),this.outputRenderTarget=I(this.inputRenderTarget)))}},{key:"swapRenderTargets",value:function(){var e=this.inputRenderTarget;this.inputRenderTarget=this.outputRenderTarget,this.outputRenderTarget=e}},{key:"render",value:function(){var e=this;this.passes.forEach((function(t){t.enabled&&(t.render(e.renderer,e.inputRenderTarget,e.outputRenderTarget),t.shouldSwap&&e.swapRenderTargets())}))}},{key:"dispose",value:function(){M(this.renderer,this.inputRenderTarget),M(this.renderer,this.outputRenderTarget),Object(T.a)(this.renderer,this.screenGeometry),this.passes.forEach((function(e){e.dispose()})),this.passes.length=0,this.renderer=null}}]),e}(),R=n(374),E=n(376),O=function(){function e(){Object(w.a)(this,e),this.renderToScreen=!1,this.shouldSwap=!0,this.shouldClear=!0,this.enabled=!0}return Object(w.c)(e,[{key:"init",value:function(e){this.composer=e}},{key:"render",value:function(e,t,n){}},{key:"dispose",value:function(){}}]),e}(),B=n(255),F="framebuffer";var j=function(e,t){e.get(F)!==t&&(e.gl.bindFramebuffer(g.o,t),e.set(F,t))},D=n(174),U=n(172),L=n(173);var N=function(e,t){e.get("renderbuffer")!==t&&(e.gl.bindRenderbuffer(g.v,t),e.set("renderbuffer",t))};var G=function(e,t,n){var i=e.gl,o=e.properties.get(t.texture),r=t.texture.format,a=t.texture.type;o.glTexture=i.createTexture(),Object(U.a)(e.state,0),Object(L.a)(e.state,o.glTexture,0),i.texImage2D(i.TEXTURE_2D,0,r,t.width,t.height,0,r,a,null),Object(D.a)(i,t.texture),n.glFrameBuffer=i.createFramebuffer(),j(e.state,n.glFrameBuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o.glTexture,0),t.generateDepth&&(n.glRenderBuffer=i.createRenderbuffer(),N(e.state,n.glRenderBuffer)),t.generateDepth&&!t.generateStencil?(i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT16,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,n.glRenderbuffer)):t.generateDepth&&t.generateStencil&&(i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,n.glRenderbuffer)),j(e.state,null),N(e.state,null),Object(L.a)(e.state,null,0)};var q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.state.get("renderTarget")!==t)if(e.state.set("renderTarget",t),t){var n=e.properties.get(t);n.glFrameBuffer||G(e,t,n),j(e.state,n.glFrameBuffer),Object(B.a)(e.state,0,0,t.width,t.height)}else j(e.state,null),B.a.apply(void 0,[e.state].concat(Object(w.b)(e.viewport)))},V="attribute vec2 aPosition;varying vec2 vUv;void main(){gl_Position=vec4(aPosition,0.0,1.0);vUv=gl_Position.xy*0.5+0.5;}",H="uniform sampler2D uInput;varying vec2 vUv;void main(){gl_FragColor=texture2D(uInput,vUv);}",W=n(378),X=n(495),Y=n(379);var K=function(e,t){Object(T.a)(e,t.geometry),Object(Y.a)(e,t.program)},Q=function(e){Object(w.d)(n,e);var t=Object(w.e)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.program,r=void 0===o?new y.a:o,a=i.vert,s=i.frag,c=i.uniforms,u=void 0===c?{}:c,l=i.inputUniformName,d=void 0===l?"uInput":l;return Object(w.a)(this,n),e=t.call(this),r.vert||(r.vert=a||V),r.frag||(r.frag=s||H),e.inputUniformName=d,e.material=new E.a({program:r,uniforms:u}),e}return Object(w.c)(n,[{key:"init",value:function(e){Object(w.h)(Object(w.i)(n.prototype),"init",this).call(this,e),this.drawInfo||(this.drawInfo=new R.a({geometry:e.screenGeometry,material:this.material}))}},{key:"setInput",value:function(e,t){this.material.uniforms[this.inputUniformName]=Object(S.a)(e,t.texture)}},{key:"render",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.setInput(e,t),q(e,this.renderToScreen?null:n),!this.renderToScreen&&this.shouldClear&&Object(X.a)(e),Object(W.a)(e,this.drawInfo)}},{key:"dispose",value:function(){K(this.composer.renderer,this.drawInfo)}},{key:"uniforms",get:function(){return this.material.uniforms}}]),n}(O),$=n(951),Z=n(496),J=n(1003),ee=n(947),te=n(955),ne=n(956),ie=n(991),oe=n(957);var re=function(e){return 0===e?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)+1)},ae=n(244),se=n(383),ce=document.createElement("canvas");ce.width=2,ce.height=2;var ue=ce,le=n(200);var de=function(e){return new Promise((function(t){var n=document.createElement("img");n.crossOrigin="Anonymous",n.onload=function(){t(n)},n.src=e}))},pe=n(161),fe=n.n(pe),ve=n(954),he=n(503),me=n(310),ge=n.n(me),ye=n(504),xe=n.n(ye),be=n(946),Se=n(952);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return p()(this,n)}}var Pe=function(e){l()(n,e);var t=we(n);function n(e){var i,r=e.program,a=e.geometry,s=e.tint,u=e.x,l=e.y,d=e.width,p=e.height,f=e.textureBinding;return o()(this,n),i=t.call(this,Object(be.a)({DrawInfoClass:Se.a,program:r,geometry:a,uniforms:{uImage:f,uTint:s}})),m()(c()(i),"width",1),m()(c()(i),"height",1),m()(c()(i),"update",(function(){i.position[0]=i.body.position.x,i.position[1]=i.body.position.y,i.rotation=i.body.angle})),i.body=ge.a.Bodies.rectangle(u,l,1,1,{friction:1e-5,restitution:.5,density:.001}),ge.a.Body.rotate(i.body,360*Math.random()),i.setScale(d,p),i}return a()(n,[{key:"setScale",value:function(e,t){this.scale[0]=e,this.scale[1]=t;var n=e/this.width,i=t/this.height;this.width=e,this.height=t;var o=this.body.angle;ge.a.Body.setAngle(this.body,0),ge.a.Body.scale(this.body,n,i),ge.a.Body.setAngle(this.body,o)}},{key:"setPosition",value:function(e,t){this.position[0]=e,this.position[1]=t,ge.a.Body.setPosition(this.body,{x:e,y:t})}},{key:"setTint",value:function(e){this.drawInfo.uniforms.uTint=e}},{key:"destroy",value:function(){}}]),n}(n(953).a);ge.a.Common.logLevel=0;var Ce,Ae,Me=function(){function e(t){var n=t.quadProgram,i=t.quadGeometry,r=t.textureBinding,a=t.scene,s=t.canvas,c=t.imageScale,u=t.imageCount,l=t.imageTint;o()(this,e),m()(this,"quads",[]),m()(this,"width",0),m()(this,"height",0),m()(this,"count",0),m()(this,"imageScale",100),m()(this,"imageRatio",1),m()(this,"imageTint",[1,1,1]),m()(this,"time",0),m()(this,"isSizeDirty",!1),this.quadProgram=n,this.quadGeometry=i,this.textureBinding=r,this.scene=a,this.canvas=s,this.engine=ge.a.Engine.create({}),this.engine.gravity.y=0,this.engine.enableSleeping=!0,this.createMouse(),ge.a.use(xe.a),this.imageScale=c,this.imageTint=l,this.setCount(u)}return a()(e,[{key:"createMouse",value:function(){var e=this.canvas.$el.closest("section")||this.canvas.$el;if(this.mouse=ge.a.Mouse.create(this.canvas.$el.closest("section")||this.canvas.$el),this.mouse.element.removeEventListener("mousewheel",this.mouse.mousewheel),this.mouse.element.removeEventListener("DOMMouseScroll",this.mouse.mousewheel),this.mouse.element.removeEventListener("touchmove",this.mouse.mousemove),this.mouse.element.removeEventListener("touchstart",this.mouse.mousedown),this.mouse.element.removeEventListener("touchend",this.mouse.mouseup),e===this.canvas.$el){var t=1/this.canvas.pixelRatio;ge.a.Mouse.setScale(this.mouse,{x:t,y:t})}this.mouseConstraint=ge.a.MouseConstraint.create(this.engine,{mouse:this.mouse,enabledEvents:{mousewheel:!1},constraint:{stiffness:.2,render:{visible:!1}}}),ge.a.World.add(this.engine.world,this.mouseConstraint)}},{key:"setCount",value:function(e){if(e!==this.count){for(var t=this.canvas,n=t.width,i=t.height,o=this.getQuadSize(),r=fe()(o,2),a=r[0],s=r[1],c=0,u=0,l=Math.max(e,this.quads.length);u<l;u+=1){var d=this.quads[u];if(u>e)d&&(this.removeQuad(d),c+=1);else if(!d){var p=Math.random()*this.canvas.width,f=Math.random()*this.canvas.height,v=new Pe({program:this.quadProgram,geometry:this.quadGeometry,textureBinding:this.textureBinding,tint:this.imageTint,x:p,y:f,width:a,height:s});v.body.plugin.wrap={min:{x:0,y:0},max:{x:n,y:i}},this.addQuad(v)}}this.quads.splice(this.quads.length-c),this.count=e}}},{key:"setScale",value:function(e){this.imageScale=e,this.updateQuadSize()}},{key:"setImageRatio",value:function(e){this.imageRatio=e,this.updateQuadSize()}},{key:"setImageTint",value:function(e){this.imageTint=e,this.quads.forEach((function(t){t.setTint(e)}))}},{key:"addQuad",value:function(e){Object(ve.a)(this.scene,e),ge.a.World.addBody(this.engine.world,e.body),this.quads.push(e)}},{key:"removeQuad",value:function(e){Object(he.a)(this.scene,e),ge.a.World.remove(this.engine.world,e.body),e.destroy()}},{key:"updateQuadSize",value:function(){var e=this.getQuadSize(),t=fe()(e,2),n=t[0],i=t[1];this.quads.forEach((function(e){e.setScale(n,i)})),this.isSizeDirty=!0}},{key:"update",value:function(e){var t=this.time?e-this.time:16;ge.a.Engine.update(this.engine,t),this.quads.forEach((function(e){e.update()})),this.time=e}},{key:"resize",value:function(e,t){if(0!==e&&0!==t&&(e!==this.width||t!==this.height)){var n=this.width?e/this.width:1,i=this.height?t/this.height:1;this.width=e,this.height=t;var o=this.getQuadSize(),r=fe()(o,2),a=r[0],s=r[1];this.quads.forEach((function(o){var r=o.body.position,c=r.x,u=r.y;o.setPosition(c*n,u*i),o.setScale(a,s),o.body.plugin.wrap={min:{x:.5*-a,y:.5*-s},max:{x:e+.5*a,y:t+.5*s}}})),this.isSizeDirty=!0}}},{key:"getQuadSize",value:function(){var e,t,n=(1+Math.max(this.width,this.height))*((this.imageScale-(e=0))*(.2-(t=.1))/(100-e)+t);return[n,n*this.imageRatio]}},{key:"needsRender",value:function(){var e=this.isSizeDirty||this.quads.some((function(e){return!e.body.isSleeping}));return this.isSizeDirty=!1,e}},{key:"destroy",value:function(){this.destroyMouse(),ge.a.Engine.clear(this.engine)}},{key:"destroyMouse",value:function(){var e=this.mouse,t=e.element,n=e.mousemove,i=e.mousedown,o=e.mouseup;ge.a.World.remove(this.engine.world,this.mouseConstraint),t.removeEventListener("mousemove",n),t.removeEventListener("mousedown",i),t.removeEventListener("mouseup",o)}}]),e}(),_e="\nattribute vec3 aPosition;\n\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = vec4(aPosition, 1.0);\n  vUv = gl_Position.xy * 0.5 + 0.5;\n}\n",Ie="blob1",Te="blob2",ke="brush1",ze="brush2",Re="brush3",Ee="circle1",Oe="polygon1",Be="polygon2",Fe=(Ce={},m()(Ce,Ie,{presetImageUrl:"https://assets.squarespace.com/webgl-components-assets/graphics/blob1.png"}),m()(Ce,Te,{presetImageUrl:"https://assets.squarespace.com/webgl-components-assets/graphics/blob2.png"}),m()(Ce,ke,{presetImageUrl:"https://assets.squarespace.com/webgl-components-assets/graphics/brush1.png"}),m()(Ce,ze,{presetImageUrl:"https://assets.squarespace.com/webgl-components-assets/graphics/brush2.png"}),m()(Ce,Re,{presetImageUrl:"https://assets.squarespace.com/webgl-components-assets/graphics/brush3.png"}),m()(Ce,Ee,{presetImageUrl:"https://assets.squarespace.com/webgl-components-assets/graphics/circle1.png"}),m()(Ce,Oe,{presetImageUrl:"https://assets.squarespace.com/webgl-components-assets/graphics/polygon1.png"}),m()(Ce,Be,{presetImageUrl:"https://assets.squarespace.com/webgl-components-assets/graphics/polygon2.png"}),Ce),je="circle",De="crossStitch",Ue="cube",Le="gingham",Ne="gradientCircle",Ge="houndstooth",qe="stitch",Ve=(Ae={},m()(Ae,je,{patternImageUrl:"https://assets.squarespace.com/webgl-components-assets/patterns/circle.png",patternSpaceX:1,patternSpaceY:1,patternOffsetX:.5,patternOffsetY:.5}),m()(Ae,De,{patternImageUrl:"https://assets.squarespace.com/webgl-components-assets/patterns/cross-stitch.png",patternSpaceX:.5,patternSpaceY:.5,patternOffsetX:0,patternOffsetY:0}),m()(Ae,Ue,{patternImageUrl:"https://assets.squarespace.com/webgl-components-assets/patterns/cube.png",patternSpaceX:.85,patternSpaceY:.75,patternOffsetX:.5,patternOffsetY:0}),m()(Ae,Le,{patternImageUrl:"https://assets.squarespace.com/webgl-components-assets/patterns/gingham.png",patternSpaceX:.67,patternSpaceY:.67,patternOffsetX:0,patternOffsetY:0}),m()(Ae,Ne,{patternImageUrl:"https://assets.squarespace.com/webgl-components-assets/patterns/gradient-circle.png",patternSpaceX:.5,patternSpaceY:.5,patternOffsetX:0,patternOffsetY:0}),m()(Ae,Ge,{patternImageUrl:"https://assets.squarespace.com/webgl-components-assets/patterns/houndstooth.png",patternSpaceX:.77,patternSpaceY:.82,patternOffsetX:0,patternOffsetY:0}),m()(Ae,qe,{patternImageUrl:"https://assets.squarespace.com/webgl-components-assets/patterns/stitch.png",patternSpaceX:.5,patternSpaceY:.5,patternOffsetX:0,patternOffsetY:0}),Ae);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var o=v()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return p()(this,n)}}var We=g.F.BLEND,Xe=g.F.FUNC_ADD,Ye=g.F.ONE_MINUS_SRC_ALPHA,Ke=g.F.SRC_ALPHA,Qe=g.F.NEAREST,$e=g.F.MIRRORED_REPEAT,Ze=function(e){l()(n,e);var t=He(n);function n(e,i){var r;return o()(this,n),r=t.call(this,e,i),m()(c()(r),"useEffects",!1),m()(c()(r),"isReady",!1),r.isSupported?(r.createResources(),r.createScene(),r.createPhysics(),r.updateEffects(),r.updateAutoUpdate(),r.preload(),r):p()(r)}return a()(n,[{key:"preload",value:function(){var e=this,t=[this.loadImage()];this.props.patternEnabled&&t.push(this.loadPatternImage()),Promise.all(t).then((function(){e.isReady=!0,e.needsForceRender=!0,e.updateAutoUpdate(),e.refresh()}))}},{key:"createResources",value:function(){this.imageQuadProgram=this.getProgram({key:"image-quad-program",factory:function(){return new y.a({vert:"\nattribute vec3 aPosition;\nattribute vec2 aUv;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aPosition, 1.0);\n\n  vUv = aUv;\n}\n",frag:"\nuniform sampler2D uImage;\nuniform vec3 uTint;\n\nvarying vec2 vUv;\n\nvoid main () {\n  vec4 texel = texture2D(uImage, vUv);\n  texel.rgb *= uTint * texel.a;\n\n  gl_FragColor = texel;\n}\n"})}}),this.quadGeometry=this.getGeometry({key:"unit-quad-geometry",factory:function(){return Object(x.a)({width:1,height:1})}}),this.texture=new b.a({image:ue}),this.textureBinding=Object(S.a)(this.renderer,this.texture),this.patternTexture=new b.a({image:ue}),this.patternTextureBinding=Object(S.a)(this.renderer,this.patternTexture),this.composer=new z({renderer:this.renderer,textureOptions:{minFilter:Qe,magFilter:Qe,wrapS:$e,wrapT:$e,premultiplyAlpha:!0},screenGeometry:this.getGeometry({key:"big-triangle",factory:P.a})}),this.waveEffect=new Q({uniforms:{uResolution:[this.canvas.width,this.canvas.height],uTime:0,uFabricSeed:0,uFabricNoise:.2*this.props.waveComplexity,uFabricNoiseStrength:.001*this.props.waveDepth,uFabricShadowDepth:.01*this.props.waveShadowDepth},program:this.getProgram({key:"wave-effect-program",factory:function(){return new y.a({vert:_e,frag:'\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_309583532(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_309583532(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_309583532(vec4 x)\n{\n  return mod289_309583532(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_309583532(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade_309583532(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat snoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289_309583532(Pi0);\n  Pi1 = mod289_309583532(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute_309583532(permute_309583532(ix) + iy);\n  vec4 ixy0 = permute_309583532(ixy + iz0);\n  vec4 ixy1 = permute_309583532(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt_309583532(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt_309583532(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade_309583532(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\nfloat ease(float t) {\n  float p = 2.0 * t * t;\n  return t < 0.5 ? p : -p + (4.0 * t) - 1.0;\n}\n\nuniform sampler2D uInput;\nuniform vec2 uResolution;\n\nuniform float uTime;\nuniform float uFabricSeed;\nuniform float uFabricNoise;\nuniform float uFabricNoiseStrength;\nuniform float uFabricShadowDepth;\n\nvarying vec2 vUv;\n\nvec3 hsv2rgb(vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 rgb2hsv(vec3 c) {\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvoid main() {\n  vec2 coord = vUv * uResolution;\n  float aspect = uResolution.x / uResolution.y;\n  vec2 offset = coord * 0.5;\n\n  coord -= offset;\n\n  vec2 uv = coord / uResolution;\n\n  uv.x *= aspect;\n  uv += uFabricSeed;\n\n  float t = uTime;\n  float scale = uFabricNoise;\n  float noise = snoise(vec3(uv.x * scale + t, uv.x * scale + t, 0.0));\n\n  coord *= 1.0 + noise * uFabricNoiseStrength;\n  coord += offset;\n  coord /= uResolution;\n\n  vec4 col = texture2D(uInput, coord);\n  vec3 colHsv = rgb2hsv(col.rgb);\n\n  colHsv[2] -= noise * uFabricShadowDepth;\n\n  col = vec4(hsv2rgb(colHsv), col.a);\n\n  gl_FragColor = col;\n}\n'})}})}),this.patternEffect=new Q({uniforms:{uResolution:[this.canvas.width,this.canvas.height],uPatternSize:this.props.patternSize,uThreadSampler:this.patternTextureBinding,uPatternColor:Object(le.c)(this.props.patternColor),uThreadOffset:[this.props.patternOffsetX,this.props.patternOffsetY],uThreadSpace:[this.props.patternSpaceX,this.props.patternSpaceY]},program:this.getProgram({key:"pattern-effect-program",factory:function(){return new y.a({vert:_e,frag:"\nuniform sampler2D uInput;\nuniform vec2 uResolution;\n\nuniform vec3 uPatternColor;\nuniform float uPatternSize;\nuniform vec2 uThreadOffset;\nuniform vec2 uThreadSpace;\nuniform sampler2D uThreadSampler;\n\nvarying vec2 vUv;\n\nvec4 getPixel (vec2 coord, vec2 size) {\n  size *= uResolution;\n  coord = (floor(coord / size) * size) + size * 0.5;\n  coord /= uResolution;\n\n  return texture2D(uInput, coord);\n}\n\nvec4 getThread (vec2 coord, vec2 uv, vec2 size, vec2 offset, vec2 ratio, vec2 shift) {\n  coord += vec2(size * uResolution.xy) * shift;\n\n  vec2 grid = ceil(coord / (size * uResolution));\n\n  if (mod(grid.x, 2.0) == 0.0) {\n    uv.y += size.y * uThreadOffset.y;\n    coord.y += (size.y * uResolution.y) * uThreadOffset.y;\n  }\n\n  if (mod(grid.y, 2.0) == 0.0) {\n    uv.x += size.x * uThreadOffset.x;\n    coord.x += (size.x * uResolution.x) * uThreadOffset.x;\n  }\n\n  vec2 phase = fract(uv / size);\n  vec2 inner = offset + (phase * ratio) - 2.0 * ratio * shift * 0.5;\n  vec4 col = vec4(uPatternColor, 1.0);\n  float alpha = 0.0;\n\n  if (inner.x >= 0.0 && inner.x <= 1.0 && inner.y >= 0.0 && inner.y <= 1.0) {\n    vec4 innerCol = getPixel(coord, size);\n\n    col = mix(col, innerCol, step(1.0, innerCol.a));\n\n    alpha = texture2D(uThreadSampler, inner).a;\n  }\n\n  return col * alpha;\n}\n\nvoid main(void) {\n  vec2 coord = vUv * uResolution.xy;\n\n  vec2 uv = coord / uResolution;\n  vec2 textureSize = vec2(uPatternSize);\n  vec2 size = textureSize / uResolution;\n  vec2 containerSize = textureSize * uThreadSpace / uResolution;\n  vec2 offset = -((containerSize - size) / size) * 0.5;\n  vec2 ratio = containerSize / size;\n\n  vec4 threadA = getThread(coord, uv, containerSize, offset, ratio, vec2(-1.0, -1.0));\n  vec4 threadB = getThread(coord, uv, containerSize, offset, ratio, vec2(0.0, -1.0));\n  vec4 threadC = getThread(coord, uv, containerSize, offset, ratio, vec2(1.0, -1.0));\n  vec4 threadD = getThread(coord, uv, containerSize, offset, ratio, vec2(-1.0, 0.0));\n  vec4 threadE = getThread(coord, uv, containerSize, offset, ratio, vec2(0.0, 0.0));\n  vec4 threadF = getThread(coord, uv, containerSize, offset, ratio, vec2(1.0, 0.0));\n  vec4 threadG = getThread(coord, uv, containerSize, offset, ratio, vec2(-1.0, 1.0));\n  vec4 threadH = getThread(coord, uv, containerSize, offset, ratio, vec2(0.0, 1.0));\n  vec4 threadI = getThread(coord, uv, containerSize, offset, ratio, vec2(1.0, 1.0));\n\n  vec4 composite = mix(threadA, threadB, threadB.a);\n  composite = mix(composite, threadC, threadC.a);\n  composite = mix(composite, threadD, threadD.a);\n  composite = mix(composite, threadE, threadE.a);\n  composite = mix(composite, threadF, threadF.a);\n  composite = mix(composite, threadG, threadG.a);\n  composite = mix(composite, threadH, threadH.a);\n  composite = mix(composite, threadI, threadI.a);\n\n  gl_FragColor = composite;\n}\n"})}})}),this.composer.addPass(this.patternEffect),this.composer.addPass(this.waveEffect)}},{key:"createScene",value:function(){this.camera=new $.a,this.scene=new Z.a,this.clearColor=Object(le.c)(this.props.backgroundColor)}},{key:"createPhysics",value:function(){var e=this.props,t=e.imageScale,n=e.imageCount,i=e.imageTint;this.physics=new Me({quadProgram:this.imageQuadProgram,quadGeometry:this.quadGeometry,scene:this.scene,canvas:this.canvas,textureBinding:this.textureBinding,imageScale:t,imageCount:n,imageTint:Object(le.c)(i)})}},{key:"loadImage",value:function(){var e,t=this,n=this.props,i=n.presetImageKey,o=n.customImage,r=o&&o.assetUrl?o.assetUrl:null===(e=Fe[i])||void 0===e?void 0:e.presetImageUrl;return r?de(r).then((function(e){var n=e.naturalWidth,i=e.naturalHeight;t.physics.setImageRatio(i/n),t.texture.image=e,t.texture.needsUpdate=!0,t.needsForceRender=!0})):Promise.resolve()}},{key:"loadPatternImage",value:function(){var e=this,t=Ve[this.props.patternImageKey],n=t.patternImageUrl,i=t.patternOffsetX,o=t.patternOffsetY,r=t.patternSpaceX,a=t.patternSpaceY;return n?de(n).then((function(t){e.patternTexture.image=t,e.patternTexture.needsUpdate=!0,e.patternEffect.uniforms.uThreadOffset[0]=i,e.patternEffect.uniforms.uThreadOffset[1]=o,e.patternEffect.uniforms.uThreadSpace[0]=r,e.patternEffect.uniforms.uThreadSpace[1]=a,e.needsForceRender=!0})):Promise.resolve()}},{key:"updateEffects",value:function(){var e=this.props,t=e.patternEnabled,n=e.patternColor,i=e.patternSize,o=e.patternImageKey,r=e.waveEnabled,a=e.waveComplexity,s=e.waveDepth,c=e.waveShadowDepth,u=t&&!!Ve[o];this.useEffects=u||r,this.patternEffect.enabled=u,this.patternEffect.renderToScreen=u&&!r,this.patternEffect.uniforms.uPatternColor=Object(le.c)(n),this.patternEffect.uniforms.uPatternSize=i,this.waveEffect.enabled=r,this.waveEffect.renderToScreen=r,this.waveEffect.uniforms.uFabricNoise=.2*a,this.waveEffect.uniforms.uFabricNoiseStrength=.001*s,this.waveEffect.uniforms.uFabricShadowDepth=.01*c}},{key:"updateAutoUpdate",value:function(){var e=this.props,t=e.waveEnabled,n=e.waveSpeed;this.autoUpdate=!(!t||!n)}},{key:"onUpdateProps",value:function(e){var t,n,i=Object(se.a)(this.props,e);i("imageCount")&&this.physics.setCount(this.props.imageCount),i("imageScale")&&this.physics.setScale(this.props.imageScale),i("imageTint")&&this.physics.setImageTint(Object(le.c)(this.props.imageTint)),i("backgroundColor")&&(this.clearColor=Object(le.c)(this.props.backgroundColor)),(i(["presetImageKey","customImage"])||(null===(t=this.props.customImage)||void 0===t?void 0:t.assetUrl)!==(null===(n=e.customImage)||void 0===n?void 0:n.assetUrl))&&this.loadImage(),(i("patternImageKey")||this.props.patternEnabled&&!e.patternEnabled)&&this.loadPatternImage(),this.updateEffects(),this.updateAutoUpdate(),this.refresh()}},{key:"update",value:function(e){this.isReady&&(this.physics.update(e),(this.needsForceRender||this.physics.needsRender())&&(Object(J.a)(this.scene),this.isDirty=!0),this.props.waveEnabled&&this.props.waveSpeed?this.waveEffect.uniforms.uTime+=.01*this.props.waveSpeed*.016:this.waveEffect.uniforms.uTime=0)}},{key:"render",value:function(){this.isReady&&(this.useEffects?this.renderWithEffects():this.renderScene())}},{key:"renderWithEffects",value:function(){this.composer.inputRenderTarget||this.refresh(),q(this.renderer,this.composer.inputRenderTarget),Object(ee.a)(this.renderer.state,[0,0,0,0]),Object(X.a)(this.renderer),this.renderScene(),this.composer.render()}},{key:"renderScene",value:function(){this.renderer.state.enable(We),Object(te.a)(this.renderer.state,Xe),Object(ne.a)(this.renderer.state,Ke,Ye),Object(ie.a)(this.renderer,this.scene,this.camera)}},{key:"onRefresh",value:function(){var e=this.canvas,t=e.width,n=e.height;Object(oe.a)({camera:this.camera,x:0,y:0,width:t,height:n}),this.physics.resize(t,n),this.composer.setSize(re(t),re(n))}},{key:"onDetach",value:function(){this.physics.destroyMouse()}},{key:"onAttach",value:function(){this.physics.createMouse()}}]),n}(ae.a);m()(Ze,"defaultProps",{backgroundColor:"#cccccc",presetImageKey:"",customImage:null,imageTint:"#ffffff",imageCount:1,imageScale:0,patternEnabled:!1,patternColor:"#aaaaaa",patternSize:16,patternImageKey:"",patternOffsetX:0,patternOffsetY:0,patternSpaceX:0,patternSpaceY:0,waveEnabled:!1,waveSpeed:0,waveComplexity:0,waveDepth:0,waveShadowDepth:0})},985:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));n(0);var i=n(141),o=n.n(i),r=n(161),a=n.n(r),s=n(110),c=n.n(s),u=n(111),l=n.n(u),d=n(142),p=n.n(d),f=n(136),v=n.n(f),h=n(137),m=n.n(h),g=n(132),y=n.n(g),x=n(109),b=n.n(x),S=n(196),w=n(251),P=n(194),C=n(195),A=n(309);var M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=void 0===t?1:t,i=e.height,o=void 0===i?1:i,r=e.depth,a=void 0===r?1:r,s=e.widthSegments,c=void 0===s?1:s,u=e.heightSegments,l=void 0===u?1:u,d=e.depthSegments,p=void 0===d?1:d,f=e.sides,v=void 0===f?{top:!0,bottom:!0,left:!0,right:!0,front:!0,back:!0}:f,h=e.position,m=void 0===h?w.b:h,g=e.normal,y=void 0===g?w.a:g,x=e.uv,b=void 0===x?w.c:x,M=new P.a,_=[],I=[],T=[],k=[],z=0,R=function(e,t,n,i,o,r,a,s,c,u){for(var l=r/c,d=a/u,p=.5*r,f=.5*a,v=.5*s,h=c+1,m=u+1,g=z,y=0;y<m;y++)for(var x=y*d-f,b=0;b<h;b++){var S=b*l-p;_[3*z+e]=S*i,_[3*z+t]=x*o,_[3*z+n]=v,I[3*z+e]=0,I[3*z+t]=0,I[3*z+n]=s>0?1:-1,T[2*z]=b/c,T[2*z+1]=1-y/u,z++}for(var w=0;w<u;w++)for(var P=0;P<c;P++){var C=g+P+h*w,A=g+P+h*(w+1),M=g+(P+1)+h*(w+1),R=g+(P+1)+h*w;k.push(C,A,R),k.push(A,M,R)}};return v.right&&R(2,1,0,-1,-1,a,o,n,p,l),v.left&&R(2,1,0,1,-1,a,o,-n,p,l),v.top&&R(0,2,1,1,1,n,a,o,c,p),v.bottom&&R(0,2,1,1,-1,n,a,-o,c,p),v.front&&R(0,1,2,1,-1,n,o,a,c,l),v.back&&R(0,1,2,-1,-1,n,o,-a,c,l),m&&Object(C.a)(M,m,new S.a({array:new Float32Array(_),itemSize:3})),y&&Object(C.a)(M,y,new S.a({array:new Float32Array(I),itemSize:3})),b&&Object(C.a)(M,b,new S.a({array:new Float32Array(T),itemSize:2})),Object(A.a)(M,new Uint16Array(k)),M};var _=function(e){for(var t=e.geometry,n=e.translation,i=e.positionAttributeName,o=void 0===i?"aPosition":i,r=t.attributes.get(o).array,a=0;a<r.length;a+=3)r[a]+=n[0],r[a+1]+=n[1],r[a+2]+=n[2];return t},I=n(113),T=n(112),k=function(e){Object(T.d)(n,e);var t=Object(T.e)(n);function n(e,i){var o;return Object(T.a)(this,n),(o=t.call(this)).source=e,o.repeatCount=i,o.sourceVertexCount=e.attributes.get("aPosition").count,o}return n}(P.a);var z=function(e){var t=e.sourceGeometry,n=e.repeatCount,i=e.AttributeArrayType,o=void 0===i?Float32Array:i,r=e.IndexArrayType,a=void 0===r?Uint16Array:r,s=e.usage,c=void 0===s?I.y:s,u=new k(t,n),l=u.sourceVertexCount;t.attributes.forEach((function(e){for(var t=new o(n*l*e.itemSize),i=0,r=0;i<n;i++)for(var a=0;a<l;a++,r+=e.itemSize)for(var s=0;s<e.itemSize;s++)t[r+s]=e.array[a*e.itemSize+s];Object(C.a)(u,e.name,new S.a({array:t,itemSize:e.itemSize,usage:c}))}));for(var d=t.index.count,p=t.index.array,f=new a(n*d),v=0;v<n;v++)for(var h=0;h<d;h++)f[v*d+h]=p[h]+v*l;return Object(A.a)(u,f),u};var R=function(e,t,n,i){for(var o=e.attributes.get(t),r=n*e.sourceVertexCount*o.itemSize,a=0;a<e.sourceVertexCount;a++)for(var s=0;s<o.itemSize;s++)o.array[r++]=i[s]};var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.batch,n=void 0===t?null:t,i=e.attributeName,o=void 0===i?"":i,r=e.itemSize,a=void 0===r?4:r,s=e.usage,c=void 0===s?I.y:s,u=e.factory,l=void 0===u?null:u,d=new Float32Array(n.repeatCount*n.sourceVertexCount*a);if(Object(C.a)(n,o,new S.a({array:d,itemSize:a,usage:c})),l)for(var p=[],f=0;f<n.repeatCount;f++)l(p,f,n.repeatCount),R(n,o,f,p)},O=n(951),B=n(381),F=function(e,t,n,i){var o,r,a,s,c,u,l,d,p,f,v=t[0],h=t[1],m=t[2],g=i[0],y=i[1],x=i[2],b=n[0],S=n[1],w=n[2];if(Math.abs(v-b)<1e-6&&Math.abs(h-S)<1e-6&&Math.abs(m-w)<1e-6)return Object(B.a)(e);l=v-b,d=h-S,p=m-w,f=1/Math.sqrt(l*l+d*d+p*p),o=y*(p*=f)-x*(d*=f),r=x*(l*=f)-g*p,a=g*d-y*l,(f=Math.sqrt(o*o+r*r+a*a))?(o*=f=1/f,r*=f,a*=f):(o=0,r=0,a=0);s=d*a-p*r,c=p*o-l*a,u=l*r-d*o,(f=Math.sqrt(s*s+c*c+u*u))?(s*=f=1/f,c*=f,u*=f):(s=0,c=0,u=0);return e[0]=o,e[1]=s,e[2]=l,e[3]=0,e[4]=r,e[5]=c,e[6]=d,e[7]=0,e[8]=a,e[9]=u,e[10]=p,e[11]=0,e[12]=-(o*v+r*h+a*m),e[13]=-(s*v+c*h+u*m),e[14]=-(l*v+d*h+p*m),e[15]=1,e};var j=function(e){F(e.viewMatrix,e.position,e.target,e.up)},D=n(946),U=n(952),L=n(375),N=n(378),G=n(384);var q=function(e){var t=e.camera,n=e.centerX,i=void 0===n?0:n,o=e.centerY,r=void 0===o?0:o,a=e.width,s=void 0===a?2:a,c=e.height,u=void 0===c?2:c,l=e.yUp,d=void 0!==l&&l;t.left=-.5*s+i,t.right=.5*s+i,t[d?"bottom":"top"]=-.5*u+r,t[d?"top":"bottom"]=.5*u+r,Object(G.a)(t)},V=n(244),H=n(382),W=n(200);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return m()(this,n)}}var Y=function(e){v()(n,e);var t=X(n);function n(e,i){var o;return c()(this,n),o=t.call(this,e,i),b()(p()(o),"viewSize",17),b()(p()(o),"baseGridSize",36),b()(p()(o),"onContextCreate",(function(e){e.extensions.get("OES_element_index_uint")})),b()(p()(o),"createGeometryBatch",(function(){var e=o.props.boxSize,t=o.props.boxSize,n=o.props.boxSize,i=o.baseGridSize/o.props.boxSize|0,r=o.baseGridSize/o.props.boxSize|0,a=e*i*-.5-.5*e,s=n*r*-.5-.5*n,c=M({width:e,height:t,depth:n,widthSegments:4,depthSegments:4,sides:{top:!0,right:!0,front:!0},uv:!1});_({geometry:c,translation:[0,-.5*t,0]});var u=z({sourceGeometry:c,repeatCount:i*r,IndexArrayType:Uint32Array});return E({batch:u,attributeName:"aGridPosition",itemSize:3,factory:function(t,o){var c=o%i*e+a,u=(o/r|0)*n+s;t[0]=c,t[1]=0,t[2]=u}}),u})),o.isSupported?(o.createResources(),o.updateAutoUpdate(),o.refresh(),o.updateUniforms(),o):m()(o)}return l()(n,[{key:"createResources",value:function(){this.renderer.onContextCreate.add(this.onContextCreate),this.onContextCreate(this.renderer),this.camera=new O.a({near:0,far:200}),this.camera.position=[50,50,50],j(this.camera),this.drawInfo=Object(D.a)({DrawInfoClass:U.a,geometry:this.getOrthoGridGeometry(),uniforms:{uTime:0,uViewMatrix:this.camera.viewMatrix,uProjectionMatrix:this.camera.projectionMatrix,uGridSize:this.baseGridSize},program:this.getProgram({key:"ortho-grid-program",factory:function(){return new L.a({vert:"\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1976991360(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_1976991360(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_1976991360(vec3 x) {\n  return mod289_1976991360(((x*34.0)+1.0)*x);\n}\n\nfloat snoise2(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_1976991360(i); // Avoid truncation effects in permutation\n  vec3 p = permute_1976991360( permute_1976991360( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec3 aGridPosition;\n\nuniform float uTime;\n\nuniform float uGridSize;\nuniform vec3 uScale;\nuniform float uEdgeWeight;\n\nuniform float uNoiseScale;\nuniform vec2 uNoiseClamp;\n\nuniform float uNoisePositionFactor;\nuniform float uNoiseScaleFactor;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vNormal;\nvarying float vNoiseFract;\n\nfloat map(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvoid main() {\n  vec2 uv = ((aGridPosition.xz + (aPosition.xz * uScale.xz) * uEdgeWeight) / uGridSize) * uNoiseScale;\n  float noiseValue = 0.0;\n\n  noiseValue += snoise2(uv + vec2(uTime));\n  noiseValue += snoise2(uv + vec2(sin(uTime), cos(uTime)));\n  noiseValue *= 0.5;\n  noiseValue = clamp(noiseValue, uNoiseClamp.x, uNoiseClamp.y);\n\n  float noiseFract = map(noiseValue, uNoiseClamp.x, uNoiseClamp.y, 0.0, 1.0);\n\n  float scaleFactor = 1.0 - noiseFract * uNoiseScaleFactor;\n\n  vec3 position = (aPosition * uScale * scaleFactor) + aGridPosition;\n\n  position.y += noiseValue * uNoisePositionFactor;\n\n  gl_Position = uProjectionMatrix * uViewMatrix * vec4(position, 1.0);\n\n  vNormal = aNormal;\n  vNoiseFract = noiseFract;\n}\n",frag:"\nuniform vec3 uLightColor;\nuniform vec3 uShadowColor;\nuniform float uLightIntensity;\nuniform vec3 uLightPosition;\n\nuniform float uNoiseColorFactor;\n\nvarying vec3 vNormal;\nvarying float vNoiseFract;\n\nvoid main() {\n  vec3 normal = normalize(vNormal);\n\n  float lightFactor = dot(normal, uLightPosition) * uLightIntensity;\n  float noiseFactor = 1.0 - (1.0 - vNoiseFract) * uNoiseColorFactor;\n\n  vec3 color = mix(uShadowColor, uLightColor, lightFactor * noiseFactor);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"})}})})}},{key:"getOrthoGridGeometry",value:function(){return this.geometryKey&&this.releaseResource(this.geometryKey),this.geometryKey="ortho-grid-geometry-".concat(this.props.boxSize),this.getGeometry({key:this.geometryKey,factory:this.createGeometryBatch})}},{key:"updateAutoUpdate",value:function(){var e=this.props.speed;this.autoUpdate=!!e}},{key:"onUpdateProps",value:function(e){this.props.boxSize!==e.boxSize&&(this.drawInfo.geometry=this.getOrthoGridGeometry()),this.updateUniforms(),this.updateAutoUpdate()}},{key:"updateUniforms",value:function(){var e=this.getColors(),t=a()(e,2),n=t[0],i=t[1];this.drawInfo.material.uniforms=o()({},this.drawInfo.material.uniforms,{uScale:[this.props.scaleX/100,this.props.scaleY/100,this.props.scaleZ/100],uEdgeWeight:this.props.isMorphEnabled?1:0,uLightColor:n,uShadowColor:i,uLightIntensity:.01*this.props.lightIntensity,uLightPosition:H.a.normalize([],[this.props.lightX,this.props.lightY,this.props.lightZ]),uNoiseScale:.01*this.props.noiseScale*2,uNoiseClamp:[.01*-this.props.noiseRange,.01*this.props.noiseRange],uNoisePositionFactor:this.props.positionFactor,uNoiseScaleFactor:this.props.scaleFactor,uNoiseColorFactor:this.props.colorFactor}),this.clearColor=i}},{key:"update",value:function(){this.drawInfo.material.uniforms.uTime+=16e-5*this.props.speed}},{key:"render",value:function(){Object(N.a)(this.renderer,this.drawInfo)}},{key:"onRefresh",value:function(){var e,t,n=this.canvas,i=n.width,o=n.height;i>o?(e=this.viewSize,t=this.viewSize*(o/i)):(e=this.viewSize*(i/o),t=this.viewSize),q({camera:this.camera,width:e,height:t,yUp:!0})}},{key:"onDestroy",value:function(){this.renderer.onContextCreate.remove(this.onContextCreate)}},{key:"getColors",value:function(){var e=Object(W.c)(this.props.startColor),t=Object(W.c)(this.props.endColor);return this.props.invertColors?[t,e]:[e,t]}}]),n}(V.a);b()(Y,"defaultProps",{boxSize:1,scaleX:0,scaleY:0,scaleZ:0,isMorphEnabled:!1,startColor:"#F08E80",endColor:"#0B0D63",invertColors:!1,lightIntensity:100,lightX:0,lightY:0,lightZ:0,speed:0,noiseScale:100,noiseRange:100,positionFactor:1,scaleFactor:0,colorFactor:1})},987:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));n(0);var i=n(141),o=n.n(i),r=n(161),a=n.n(r),s=n(110),c=n.n(s),u=n(111),l=n.n(u),d=n(142),p=n.n(d),f=n(136),v=n.n(f),h=n(137),m=n.n(h),g=n(132),y=n.n(g),x=n(109),b=n.n(x),S=n(946),w=n(494),P=n(378),C=n(244),A=n(200),M=n(53),_=n.n(M),I=function(){function e(t){var n=t.color1,i=t.color2;c()(this,e),this.color1=_()(n),this.color2=_()(i)}return l()(e,[{key:"update",value:function(){}}]),e}(),T=n(375),k="\nattribute vec3 aPosition;\n\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = vec4(aPosition, 1.0);\n  vUv = gl_Position.xy * 0.5 + 0.5;\n}\n",z=function(){function e(t){var n=this,i=t.stage;c()(this,e),b()(this,"angle",0),b()(this,"setProps",(function(e){n.props=o()({},n.props,e),n.angle=n.props.linearGradientAngle})),this.props=o()({},e.defaultProps),this.stage=i}return l()(e,[{key:"getProgram",value:function(){return this.stage.getProgram({key:"linear-gradient-program",factory:function(){return new T.a({vert:k,frag:"\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_4217261547(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_4217261547(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_4217261547(vec4 x) {\n     return mod289_4217261547(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_4217261547(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_4217261547 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_4217261547 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_4217261547;\n  vec3 i1 = min( g_4217261547.xyz, l.zxy );\n  vec3 i2 = max( g_4217261547.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_4217261547.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_4217261547(i);\n  vec4 p = permute_4217261547( permute_4217261547( permute_4217261547(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_4217261547.wyz - D_4217261547.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_4217261547 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_4217261547 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_4217261547.xy,h.z);\n  vec3 p3 = vec3(a1_4217261547.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_4217261547(vec4(dot(p0_4217261547,p0_4217261547), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_4217261547 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_4217261547,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nfloat ease(float t) {\n  float f = t - 1.0;\n  return f * f * f + 1.0;\n}\n\n#define V_SEED_X 12.9898\n#define V_SEED_Y 78.233\n#define R_SEED 43758.5453\n#define PI 3.141592653589793\n\nuniform vec3 uColor1;\nuniform vec3 uColor2;\n\nuniform float uNoiseIntensity;\nuniform float uNoiseScale;\nuniform float uNoiseBias;\nuniform float uNoiseTime;\n\nuniform vec2 uAngle;\nuniform float uPosition1;\nuniform float uPosition2;\nuniform float uRepeat;\n\nuniform vec2 uResolution;\n\nuniform float uComplexity;\nuniform float uDirection;\nuniform float uIntensity;\nuniform float uSeed;\nuniform float uSmoothness;\nuniform float uTime;\nuniform float uMorphTime;\n\nvarying vec2 vUv;\nvarying float vDepth;\n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy, vec2(V_SEED_X, V_SEED_Y))) * R_SEED);\n}\n\nfloat noise(vec2 uv) {\n  float random = rand(uv + uNoiseTime);\n\n  return snoise(vec3(uv, uNoiseTime) * uNoiseScale + random);\n}\n\nvec2 rotate(vec2 uv,float amount){\n  float ca = cos(amount);\n  float sa = sin(amount);\n\n  return vec2(\n    uv.x * ca + uv.y * sa,\n    -uv.x * sa + uv.y * ca\n  );\n}\n\nfloat getNoise(vec2 uv) {\n  vec2 direction = rotate(vec2(uTime), uDirection);\n\n  return 1.0 - snoise(vec3(uv * uComplexity + direction, uMorphTime) + uSeed);\n}\n\nvoid main () {\n  float dist = 1.0 - ease(smoothstep(1.0 - uSmoothness, 1.0, 1.0 - getNoise(vUv))) * uIntensity;\n  vec2 uv = (vUv - 0.5) * dist + 0.5;\n\n  float t = dot(vec2(0.5) - uv, uAngle) + 0.5;\n  t = (cos(t * uRepeat * PI) + 1.0) * 0.5;\n  t += uNoiseIntensity * (noise(gl_FragCoord.xy / uResolution) + uNoiseBias);\n\n  float gradient = clamp(\n    map(t, uPosition1, uPosition2, 0.0, 1.0),\n    0.0,\n    1.0\n  );\n\n  vec3 color = mix(uColor1, uColor2, gradient);\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"})}})}},{key:"getUniforms",value:function(){return this.uniforms={uAngle:[Math.cos(-this.props.linearGradientAngle*Math.PI/180),Math.sin(-this.props.linearGradientAngle*Math.PI/180)],uPosition1:.5*(.01*this.props.linearGradientStartColorDistance+1),uPosition2:.5*(.01*this.props.linearGradientEndColorDistance+1),uRepeat:this.props.linearGradientRepeat},this.uniforms}},{key:"update",value:function(){if(this.props.linearGradientAngle){var e=this.angle*Math.PI/180;this.uniforms.uAngle[0]=Math.cos(e),this.uniforms.uAngle[1]=Math.sin(e),this.angle-=.016*this.props.linearGradientAngleMotion}else this.uniforms.uAngle[0]=Math.cos(-this.props.linearGradientAngle*Math.PI/180),this.uniforms.uAngle[1]=Math.sin(-this.props.linearGradientAngle*Math.PI/180)}},{key:"onAttach",value:function(){}},{key:"onDetach",value:function(){}}]),e}();b()(z,"defaultProps",{linearGradientStartColorDistance:-100,linearGradientEndColorDistance:100,linearGradientAngle:10,linearGradientAngleMotion:0,linearGradientRepeat:1});var R=n(303),E=function(){function e(t){var n=t.position,i=t.target,o=t.speed,r=void 0===o?.5:o;c()(this,e),this.position=n,this.target=i,this.speed=r}return l()(e,[{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.016,t=this.target,n=this.position,i=this.speed;n[0]+=(t[0]-n[0])*(i*e),n[1]+=(t[1]-n[1])*(i*e)}}]),e}(),O=function(){function e(t){var n=this,i=t.node,r=t.position;c()(this,e),b()(this,"target",[.5,.5]),b()(this,"setProps",(function(e){n.props=o()({},n.props,e),n.animation.speed=n.props.followSpeed,n.position[0]=n.target[0]=n.props.restX,n.position[1]=n.target[1]=n.props.restY,n.props.enabled?n.addEventListeners():(n.removeEventListeners(),n.update())})),b()(this,"onPointerMove",(function(e){var t=n.node.getBoundingClientRect(),i=(e.clientX-t.left)/t.width,o=1-(e.clientY-t.top)/t.height;n.target[0]=i,n.target[1]=o,clearTimeout(n.pointerTargetResetTID)})),b()(this,"onPointerLeave",(function(){clearTimeout(n.pointerTargetResetTID),n.pointerTargetResetTID=setTimeout(n.resetPointerTarget,2e3)})),b()(this,"resetPointerTarget",(function(){R.a.copy(n.target,[n.props.restX,n.props.restY])})),this.props=o()({},e.defaultProps),this.node=i,this.position=r,this.animation=new E({position:this.position,target:this.target})}return l()(e,[{key:"addEventListeners",value:function(){this.node.addEventListener("mousemove",this.onPointerMove),this.node.addEventListener("mouseleave",this.onPointerLeave)}},{key:"removeEventListeners",value:function(){this.node.removeEventListener("mousemove",this.onPointerMove),this.node.removeEventListener("mouseleave",this.onPointerLeave)}},{key:"update",value:function(){if(this.props.enabled)this.animation.update();else{var e=this.props,t=e.restX,n=e.restY;this.position[0]=t,this.position[1]=n}}},{key:"destroy",value:function(){this.removeEventListeners(),delete this.node}}]),e}();b()(O,"defaultProps",{enabled:!1,restX:.5,restY:.5,followSpeed:.1});var B=function(){function e(t){var n=this,i=t.stage,r=t.node;c()(this,e),b()(this,"position",[0,0]),b()(this,"setProps",(function(e){n.props=o()({},n.props,e),n.updateFollowCursor()})),this.props=o()({},e.defaultProps),this.node=r,this.stage=i,this.createFollowCursor()}return l()(e,[{key:"createFollowCursor",value:function(){this.followCursor=new O({node:this.node.closest("section")||this.node,position:this.position})}},{key:"updateFollowCursor",value:function(){this.followCursor.setProps({enabled:this.props.radialGradientFollowCursor,restX:.01*this.props.radialGradientPositionX,restY:.01*this.props.radialGradientPositionY,followSpeed:.01*this.props.radialGradientFollowSpeed})}},{key:"getProgram",value:function(){return this.stage.getProgram({key:"radial-gradient-program",factory:function(){return new T.a({vert:k,frag:"\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_647663866(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_647663866(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_647663866(vec4 x) {\n     return mod289_647663866(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_647663866(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_647663866 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_647663866 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_647663866;\n  vec3 i1 = min( g_647663866.xyz, l.zxy );\n  vec3 i2 = max( g_647663866.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_647663866.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_647663866(i);\n  vec4 p = permute_647663866( permute_647663866( permute_647663866(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_647663866.wyz - D_647663866.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_647663866 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_647663866 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_647663866.xy,h.z);\n  vec3 p3 = vec3(a1_647663866.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_647663866(vec4(dot(p0_647663866,p0_647663866), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_647663866 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_647663866,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nfloat ease(float t) {\n  float f = t - 1.0;\n  return f * f * f + 1.0;\n}\n\n#define V_SEED_X 12.9898\n#define V_SEED_Y 78.233\n#define R_SEED 43758.5453\n\nuniform vec3 uColor1;\nuniform vec3 uColor2;\n\nuniform float uNoiseIntensity;\nuniform float uNoiseScale;\nuniform float uNoiseBias;\nuniform float uNoiseTime;\n\nuniform vec2 uPosition;\nuniform float uRadius;\n\nuniform vec2 uResolution;\n\nuniform float uComplexity;\nuniform float uDirection;\nuniform float uIntensity;\nuniform float uSeed;\nuniform float uSmoothness;\nuniform float uTime;\nuniform float uMorphTime;\n\nvarying vec2 vUv;\nvarying float vDepth;\n\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy, vec2(V_SEED_X, V_SEED_Y))) * R_SEED);\n}\n\nfloat noise(vec2 uv) {\n  float random = rand(uv + uNoiseTime);\n\n  return snoise(vec3(uv, uNoiseTime) * uNoiseScale + random);\n}\n\nvec2 rotate(vec2 uv,float amount){\n  float ca = cos(amount);\n  float sa = sin(amount);\n\n  return vec2(\n    uv.x * ca + uv.y * sa,\n    -uv.x * sa + uv.y * ca\n  );\n}\n\nfloat getNoise(vec2 uv) {\n  vec2 direction = rotate(vec2(uTime), uDirection);\n\n  return 1.0 - snoise(vec3(uv * uComplexity + direction, uMorphTime) + uSeed);\n}\n\nvoid main () {\n  float dist = 1.0 - ease(smoothstep(1.0 - uSmoothness, 1.0, 1.0 - getNoise(vUv))) * uIntensity;\n  vec2 uv = (vUv - 0.5) * dist + 0.5;\n\n  vec2 center = uPosition;\n  float aspect = uResolution.x / uResolution.y;\n\n  uv.x *= aspect;\n  center.x *= aspect;\n\n  float t = clamp(length(center - uv) / uRadius, 0.0, 1.0);\n  t += uNoiseIntensity * (noise(gl_FragCoord.xy / uResolution) + uNoiseBias);\n\n  vec3 color = mix(uColor1, uColor2, smoothstep(0.0, 1.0, t));\n\n  gl_FragColor = vec4(color, 1.0);\n}\n"})}})}},{key:"getUniforms",value:function(){return this.uniforms={uRadius:.01*this.props.radialGradientRadius,uPosition:this.position},this.uniforms}},{key:"update",value:function(){this.followCursor.update()}},{key:"destroy",value:function(){this.followCursor.destroy()}},{key:"onAttach",value:function(e){this.node=e,this.createFollowCursor(),this.updateFollowCursor()}},{key:"onDetach",value:function(){this.destroy()}}]),e}();function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var o=y()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return m()(this,n)}}b()(B,"defaultProps",{radialGradientRadius:50,radialGradientPositionX:50,radialGradientPositionY:50,radialGradientFollowCursor:!1,radialGradientFollowSpeed:50});var j={linear:z,radial:B},D={none:I},U=function(e){v()(n,e);var t=F(n);function n(e,i){var o;return c()(this,n),o=t.call(this,e,i),b()(p()(o),"gradientType",""),o.isSupported?(o.updateGradient(),o.updateDrawInfo(),o.updateAutoUpdate(),o):m()(o)}return l()(n,[{key:"updateGradient",value:function(){var e=this.getColors(),t=a()(e,2),n=t[0],i=t[1];this.gradient=new j[this.props.gradientType]({stage:this,node:this.node}),this.gradient.setProps(this.props),this.gradientAnimation=new D[this.props.gradientAnimationType]({color1:n,color2:i,speed:.01*this.props.gradientAnimationSpeed,offset:.01*this.props.gradientAnimationIntensity})}},{key:"updateDrawInfo",value:function(){var e=this.props.gradientType;return this.gradientType!==e&&(this.gradientType=e,this.drawInfo=Object(S.a)({program:this.gradient.getProgram(),uniforms:o()({uTime:0,uMorphTime:0,uNoiseTime:0},this.getGradientUniforms()),geometry:this.getGeometry({key:"big-triangle",factory:function(){return Object(w.a)()}})}),!0)}},{key:"updateUniforms",value:function(){Object.assign(this.drawInfo.uniforms,this.getGradientUniforms())}},{key:"getGradientUniforms",value:function(){return o()({},this.gradient.getUniforms(),{uColor1:this.gradientAnimation.color1,uColor2:this.gradientAnimation.color2,uNoiseIntensity:.01*this.props.noiseIntensity,uNoiseScale:100+.01*(100-this.props.noiseScale)*900,uNoiseBias:.01*this.props.noiseBias,uResolution:[this.canvas.width,this.canvas.height],uComplexity:.1*this.props.distortionComplexity,uDirection:(45+this.props.distortionDirection)*(Math.PI/180),uIntensity:.01*this.props.distortionIntensity,uSeed:this.props.distortionSeed,uSmoothness:.01*this.props.distortionSmoothness})}},{key:"updateAutoUpdate",value:function(){var e=this.props,t=e.linearGradientAngleMotion,n=e.radialGradientFollowCursor,i=e.radialGradientFollowSpeed,o=e.animateNoise,r=e.distortionSpeed,a=e.distortionMorphSpeed;this.autoUpdate=o||t||!(!n||!i)||!(!r&&!a)}},{key:"onUpdateProps",value:function(){this.updateGradient(),this.updateDrawInfo()||this.updateUniforms(),this.updateAutoUpdate(),this.refresh()}},{key:"update",value:function(){this.gradient.update(),this.props.animateNoise?(this.drawInfo.uniforms.uNoiseTime+=.016,this.drawInfo.uniforms.uNoiseTime%=1):this.drawInfo.uniforms.uNoiseTime=0,this.drawInfo.uniforms.uTime+=5e-5*this.props.distortionSpeed,this.drawInfo.uniforms.uMorphTime+=1e-4*this.props.distortionMorphSpeed,this.gradientAnimation.update()}},{key:"render",value:function(){Object(P.a)(this.renderer,this.drawInfo)}},{key:"onRefresh",value:function(){this.drawInfo.uniforms.uResolution[0]=this.canvas.width,this.drawInfo.uniforms.uResolution[1]=this.canvas.height}},{key:"getColors",value:function(){var e=Object(A.c)(this.props.startColor),t=Object(A.c)(this.props.endColor);return this.props.invertColors?[t,e]:[e,t]}},{key:"onAttach",value:function(){this.gradient.onAttach(this.node)}},{key:"onDetach",value:function(){this.gradient.onDetach()}}]),n}(C.a);b()(U,"defaultProps",{gradientType:"radial",invertColors:!1,startColor:"#ffffff",endColor:"#000000",linearGradientStartColorDistance:0,linearGradientEndColorDistance:0,linearGradientAngle:0,linearGradientAngleMotion:0,linearGradientRepeat:1,radialGradientRadius:0,radialGradientPositionX:0,radialGradientPositionY:0,radialGradientFollowCursor:!1,radialGradientFollowSpeed:0,noiseIntensity:0,noiseScale:0,noiseBias:0,animateNoise:!1,distortionComplexity:0,distortionDirection:0,distortionIntensity:0,distortionMorphSpeed:0,distortionSeed:0,distortionSmoothness:0,distortionSpeed:0,gradientAnimationType:"none",gradientAnimationSpeed:0,gradientAnimationIntensity:0})},988:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));n(0);var i=n(53),o=n.n(i),r=n(110),a=n.n(r),s=n(111),c=n.n(s),u=n(142),l=n.n(u),d=n(136),p=n.n(d),f=n(137),v=n.n(f),h=n(132),m=n.n(h),g=n(109),y=n.n(g),x=n(113),b=n(375),S=n(950),w=n(951),P=n(496),C=n(954),A=n(1003),M=n(955),_=n(956),I=n(991),T=n(957),k=n(244),z=function(e){var t,n="number"==typeof e?(t=e,function(e){return t=t+1831565813|0,(((e=(e=Math.imul(t^t>>>15,1|t))+Math.imul(e^e>>>7,61|e)^e)^e>>>14)>>>0)/Math.pow(2,32)}):Math.random,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e+n()*(t-e)},o=function(e,t){return Math.round(i(e,t))};return{random:n,randomFloat:i,randomFloatBias:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=i(e,t),a=i(0,1)*o;return r*(1-a)+n*a},randomInt:o,randomBool:function(){return!!Math.round(n())},randomFromArray:function(e){return e[o(0,e.length-1)]},shuffle:function(e){for(var t=e.length-1;t>0;t--){var i=n()*t|0,o=e[t];e[t]=e[i],e[i]=o}return e}}},R=n(200),E=function(e,t,n){return e>t-n?1:Math.sqrt(e-.5)/Math.sqrt(t-.5*(n+1))},O=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=1,i=Math.round(n*Math.sqrt(e)),o=.5*(Math.sqrt(5)+1),r=[],a=1;a<e+1;a++){var s=E(a,e,i),c=2*Math.PI*a/(o*o);r.push([Math.cos(c)*s*t,Math.sin(c)*s*t])}return r},B=n(383),F=n(946),j=n(952),D=n(953),U=n(382),L=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05;a()(this,e),this.current=t,this.target=t,this.speed=n}return c()(e,[{key:"setTarget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(this.current=e),this.target=e}},{key:"getValue",value:function(){return this.current}},{key:"update",value:function(){var e=(this.target-this.current)*this.speed;return this.current+=e,this.current}}]),e}();function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return v()(this,n)}}var G=function(e){p()(n,e);var t=N(n);function n(e){var i,o=e.geometry,r=e.program,s=e.metaballs,c=e.containerWidth,u=e.containerHeight;a()(this,n),i=t.call(this,Object(F.a)({DrawInfoClass:j.a,program:r,geometry:o,uniforms:{uColor:[0,1,0],uMetaballs:s}})),y()(l()(i),"wobble",0),y()(l()(i),"morph",0),y()(l()(i),"speed",0),y()(l()(i),"scrollOffset",0),y()(l()(i),"containerWidth",0),y()(l()(i),"containerHeight",0),y()(l()(i),"metaballSizes",[]);for(var d=0;d<s.length;d+=3)i.metaballSizes.push(s[d+2]);return i.anchor=[0,0],i.containerWidth=c,i.containerHeight=u,i.time=Math.random()*Math.PI,i.size=new L(0),i}return c()(n,[{key:"setAnchor",value:function(e,t){this.anchor[0]=e,this.anchor[1]=t}},{key:"setSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.size.setTarget(e,t)}},{key:"update",value:function(){var e=this.size.update(),t=this.containerWidth,n=this.containerHeight;this.scale[0]=e*Math.max(t,n),this.scale[1]=this.scale[0],this.position[0]=this.anchor[0]*t,this.position[1]=(this.anchor[1]+this.scrollOffset+Math.sin(this.time)*this.wobble)*n;var i=this.drawInfo.uniforms.uMetaballs;i[2]=this.metaballSizes[0]+.02*Math.sin(this.time+1)*this.morph,i[5]=this.metaballSizes[1]+.02*Math.cos(this.time+2)*this.morph,i[8]=this.metaballSizes[2]+.02*Math.sin(this.time+3)*this.morph,i[11]=this.metaballSizes[3]+.02*Math.cos(this.time+4)*this.morph,i[14]=this.metaballSizes[4]+.02*Math.sin(this.time+5)*this.morph,this.time+=.016*this.speed}},{key:"setContainerSize",value:function(e,t){this.containerWidth=e,this.containerHeight=t}},{key:"color",get:function(){return this.drawInfo.uniforms.uColor},set:function(e){U.a.copy(this.drawInfo.uniforms.uColor,e)}}]),n}(D.a),q="linear",V="edge",H="center",W="monochromatic",X="vibrant";function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m()(e);if(t){var o=m()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return v()(this,n)}}var K=x.F.BLEND,Q=x.F.FUNC_ADD,$=x.F.ONE_MINUS_SRC_ALPHA,Z=x.F.SRC_ALPHA,J=function(e){p()(n,e);var t=Y(n);function n(e,i){var o;return a()(this,n),o=t.call(this,e,i),y()(l()(o),"scrollProgress",0),y()(l()(o),"onScrollProgress",(function(e){o.scrollProgress=e})),o.isSupported?(o.createResources(),o.createScene(),o.updateRNG(),o.updateShapes(),o.updateDistribution(),o.updateColor(),o.updateSize(!0),o.updateAnimation(),o.updateCount(),o.updateAutoUpdate(),o.refresh(),o):v()(o)}return c()(n,[{key:"createResources",value:function(){this.blobProgram=this.getProgram({key:"blob-program",factory:function(){return new b.a({vert:"\nattribute vec3 aPosition;\nattribute vec2 aUv;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vUv;\n\nvoid main() {\n  gl_Position = uProjectionMatrix * uModelViewMatrix * vec4(aPosition, 1.0);\n\n  vUv = aUv;\n}\n",frag:"\nuniform vec3 uMetaballs[5];\n\nuniform vec3 uColor;\nuniform vec2 uSize;\n\nvarying vec2 vUv;\n\nvoid main() {\n  float frag = 0.0;\n  float d = 0.0;\n  vec3 m;\n\n  // 0\n  m = uMetaballs[0];\n  d += m.z / distance(m.xy, vUv);\n  frag += smoothstep(0.97, 1.0, length(d));\n\n  // 1\n  m = uMetaballs[1];\n  d += m.z / distance(m.xy, vUv);\n  frag += smoothstep(0.97, 1.0, length(d));\n\n  // 2\n  m = uMetaballs[2];\n  d += m.z / distance(m.xy, vUv);\n  frag += smoothstep(0.97, 1.0, length(d));\n\n  // 3\n  m = uMetaballs[3];\n  d += m.z / distance(m.xy, vUv);\n  frag += smoothstep(0.97, 1.0, length(d));\n\n  // 4\n  m = uMetaballs[4];\n  d += m.z / distance(m.xy, vUv);\n  frag += smoothstep(0.97, 1.0, length(d));\n\n  // clamp\n  frag = step(1.0, clamp(frag, 0.0, 1.0));\n\n  gl_FragColor = vec4(uColor, frag);\n}\n"})}}),this.quadGeometry=this.getGeometry({key:"unit-quad-geometry",factory:function(){return Object(S.a)({width:1,height:1})}})}},{key:"createScene",value:function(){this.camera=new w.a,this.scene=new P.a}},{key:"updateRNG",value:function(){this.rng=z(this.props.seed)}},{key:"updateShapes",value:function(){this.shapes=[];for(var e=0;e<n.MAX_SHAPES;e++){for(var t=[],i=0;i<5;i++)t.push(this.rng.randomFloat(.3,.7),this.rng.randomFloat(.3,.7),this.rng.randomFloat(.03,.06));var o=new G({geometry:this.quadGeometry,program:this.blobProgram,containerWidth:this.canvas.width,containerHeight:this.canvas.height,metaballs:t});this.shapes.push(o)}}},{key:"updateDistribution",value:function(){var e,t=this.props.distribution,i=n.MAX_SHAPES;switch(t){case V:e=function(e,t){for(var n=[],i=0;i<t;i++){var o=e.randomFloat(0,2*Math.PI),r=Math.cos(o),a=Math.sin(o);n.push([.5+.5*r*e.randomFloat(1,1.2),.5+.5*a*e.randomFloat(1,1.2)])}return n}(this.rng,i);break;case H:e=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=e.shuffle(O(t,.5));return i.map((function(t){return[.5*(t[0]+1)+e.randomFloat(-n,n),.5*(t[1]+1)+e.randomFloat(-n,n)]}))}(this.rng,i);break;case q:default:e=function(e,t){for(var n=[],i=0;i<t;i++)n.push([e.randomFloat(0,1),e.randomFloat(0,1)]);return n}(this.rng,i)}for(var r=0;r<n.MAX_SHAPES;r++){var a;(a=this.shapes[r]).setAnchor.apply(a,o()(e[r]))}}},{key:"updateCount",value:function(){var e=this;this.scene.children.length=0,this.visibleShapes=this.shapes.slice(0,Math.min(this.props.count,n.MAX_SHAPES)),this.visibleShapes.forEach((function(t){Object(C.a)(e.scene,t)}))}},{key:"updateColor",value:function(){var e=this.props,t=e.backgroundColor,n=e.colorMode;switch(this.clearColor=Object(R.c)(t),n){case X:this.setVibrantColors();break;case W:default:this.setMonochromaticColors()}}},{key:"setMonochromaticColors",value:function(){var e=this,t=Object(R.c)(this.props.baseColor),n=Object(R.d)([],t),i=R.a.apply(void 0,o()(t))>.5?-1:1;this.shapes.forEach((function(t){Object(R.b)(t.color,[n[0],n[1],n[2]+e.rng.randomFloat(0,.5)*i])}))}},{key:"setVibrantColors",value:function(){var e=this;this.shapes.forEach((function(t){Object(R.b)(t.color,[e.rng.randomFloat(0,1),1,.5])}))}},{key:"updateSize",value:function(e){var t=this,n=this.props,i=n.size,o=n.sizeVariance;this.shapes.forEach((function(n){var r=t.rng.randomFloat(i,i+o)/100;n.setSize(r,e)}))}},{key:"updateAnimation",value:function(){var e=this,t=this.props,n=t.wobble,i=t.morph,o=t.speed;this.shapes.forEach((function(t){t.wobble=.01*n*e.rng.randomFloat(.8,1.2)*.05,t.morph=.01*i*e.rng.randomFloat(.8,1.2),t.speed=.01*o*e.rng.randomFloat(.8,1.2)}))}},{key:"updateAutoUpdate",value:function(){var e=this.props,t=e.wobble,n=e.morph,i=e.speed,o=e.scrollMovement;this.autoUpdate=!!(o||i&&(t||n))}},{key:"onUpdateProps",value:function(e){var t=Object(B.a)(this.props,e);if(this.updateRNG(),t("seed"))return this.updateShapes(),this.updateDistribution(),this.updateColor(),this.updateSize(!0),this.updateAnimation(),this.updateCount(),void this.updateAutoUpdate();t("distribution")&&this.updateDistribution(),t("count")&&this.updateCount(),t(["backgroundColor","baseColor","colorMode"])&&this.updateColor(),t(["size","sizeVariance"])&&this.updateSize(!1),t(["wobble","morph","speed"])&&this.updateAnimation(),this.updateAutoUpdate()}},{key:"update",value:function(){var e=this,t=this.props.scrollMovement/100*.5;this.visibleShapes.forEach((function(n,i,o){var r=o.length,a=t*i/(r-1),s=-a+2*a*e.scrollProgress;n.scrollOffset=s,n.update()})),Object(A.a)(this.scene)}},{key:"render",value:function(){this.renderer.state.enable(K),Object(M.a)(this.renderer.state,Q),Object(_.a)(this.renderer.state,Z,$),Object(I.a)(this.renderer,this.scene,this.camera)}},{key:"onRefresh",value:function(){var e=this.canvas,t=e.width,n=e.height;this.shapes.forEach((function(e){e.setContainerSize(t,n)})),Object(T.a)({camera:this.camera,x:0,y:0,width:t,height:n})}}]),n}(k.a);y()(J,"MAX_SHAPES",100),y()(J,"defaultProps",{seed:0,count:32,distribution:V,colorMode:W,backgroundColor:"#ffffff",baseColor:"#000000",size:10,sizeVariance:0,wobble:0,morph:0,speed:0,scrollMovement:0})},991:function(e,t,n){"use strict";var i=function(e,t,n){var i=t[0],o=t[1],r=t[2],a=t[3],s=t[4],c=t[5],u=t[6],l=t[7],d=t[8],p=t[9],f=t[10],v=t[11],h=t[12],m=t[13],g=t[14],y=t[15],x=n[0],b=n[1],S=n[2],w=n[3];return e[0]=x*i+b*s+S*d+w*h,e[1]=x*o+b*c+S*p+w*m,e[2]=x*r+b*u+S*f+w*g,e[3]=x*a+b*l+S*v+w*y,x=n[4],b=n[5],S=n[6],w=n[7],e[4]=x*i+b*s+S*d+w*h,e[5]=x*o+b*c+S*p+w*m,e[6]=x*r+b*u+S*f+w*g,e[7]=x*a+b*l+S*v+w*y,x=n[8],b=n[9],S=n[10],w=n[11],e[8]=x*i+b*s+S*d+w*h,e[9]=x*o+b*c+S*p+w*m,e[10]=x*r+b*u+S*f+w*g,e[11]=x*a+b*l+S*v+w*y,x=n[12],b=n[13],S=n[14],w=n[15],e[12]=x*i+b*s+S*d+w*h,e[13]=x*o+b*c+S*p+w*m,e[14]=x*r+b*u+S*f+w*g,e[15]=x*a+b*l+S*v+w*y,e};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=t[4],e[6]=0,e[7]=t[5],e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[6],e[13]=t[7],e[14]=0,e[15]=1,e},r=n(378);var a=function(e,t,n){e.uniformValues.set(t,n)},s=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e};var c=s(),u=s();t.a=function(e,t,n){a(e,"uProjectionMatrix",n.projectionMatrix),t.children.forEach((function t(s){s.visible&&(s.drawInfo&&(a(e,"uModelViewMatrix",i(c,n.viewMatrix,o(u,s.worldMatrix))),Object(r.a)(e,s.drawInfo)),s.children.forEach(t))}))}}}]);